"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[875],{24144:function(e,t,n){n.r(t),n.d(t,{SRPNavigationSubmitHandler:function(){return SRPNavigationSubmitHandler},SearchBox:function(){return SearchBox$2},SearchBoxCombobox:function(){return tM},SearchBoxModal:function(){return SearchBoxModalContainer$1},buildURL:function(){return buildURL},isSearchBoxSelection:function(){return isSearchBoxSelection},isSuggestion:function(){return isSuggestion}});var i,o,r,a,l,c=n(94783),u=n(86854),s=n(67294),d=n(19521),m=n(19302),g=n(94062),_=n(42154),f=n(76768),S=n(31888),h=n(87916),p=n(2259),v=n(22084),b=n(58937),R=n(21853),E=n(6846),y=n(4618),N=n(62537),C=n(39373),x=n(75713),O=n(43118),I=n(59094),A=n(73872),T=n(66210),L=n(99115),k=n(24312),B=n(1368),w=n(93543),M=n(11238),F=n(57981),U=n(41862),D=n(92400),P=n(88238),Z=n(42734),H=n(33242),G=n(36184),q=n(72667),j=n(71506),$=n(41451),V=n(57557),z=n.n(V),W=n(41609),Q=n.n(W),Y=n(43916),K=n(59303),X=n(77615),J=n(30998),ee=n.n(J),et=n(1164),en=n(81880),ei=n(94635),eo=n(71002),er=n(59242),ea=n.n(er),el=n(6557),ec=n.n(el),eu=n(87462),es=n(91),ed=n(97326),em=n(94578),eg=n(87620),e_="init-local-results",ef="freeform",eS="clear input",eh={CLAIMED_HOME:"CLAIMED_HOME",CURRENT_LOCATION:"CURRENT_LOCATION",SAVED_SEARCH:"SAVED_SEARCH",SAVED_HOME:"SAVED_HOME",RECENT_SEARCH:"RECENT_SEARCH",SEMANTIC:"SEMANTIC"},ep=((i={}).address="ADDRESS",i.claimedHome="CLAIMED_HOME",i.currentLocation="CURRENT_LOCATION",i.rawSearch="RAW_SEARCH",i.recentSearch="RECENT_SEARCH",i.region="REGION",i.savedHome="SAVED_HOME",i.savedSearch="SAVED_SEARCH",i.semantic="SEMANTIC",i.builderCommunity="BUILDER_COMMUNITY",i),isSuggestion=function(e){return!("regions"in e)},isSearchBoxSelection=function(e){return"regions"in e},isRecentSearch=function(e){return e.category===ep.recentSearch},isRegionSuggestion=function(e){return e.category===ep.region},isRecentRegionSuggestion=function(e){return isRecentSearch(e)&&e.subCategory===ep.region},isSemanticSuggestion=function(e){return e.category===ep.semantic},isRecentSemanticSuggestion=function(e){return isRecentSearch(e)&&e.subCategory===ep.semantic},isAddressSuggestion=function(e){var t;return e.category===ep.address&&(null===(t=e.data)||void 0===t?void 0:t.addressType)!=="community_address"},isRecentAddressSuggestion=function(e){var t;return isRecentSearch(e)&&e.subCategory===ep.address&&(null===(t=e.data)||void 0===t?void 0:t.addressType)!=="community_address"},isRentalCommunitySuggestion=function(e){var t;return e.category===ep.address&&(null===(t=e.data)||void 0===t?void 0:t.addressType)==="community_address"},isRecentRentalCommunitySuggestion=function(e){var t;return isRecentSearch(e)&&e.subCategory===ep.address&&(null===(t=e.data)||void 0===t?void 0:t.addressType)==="community_address"},isSavedSearchSuggestion=function(e){return e.category===ep.savedSearch},encodeSeoURLStringBldg=function(e){var t=e.split(/,/g);return(t=t.map(function(e){return e.trim().replace(/[;\\/ ]/g,"-")})).join("-")},getShouldUseBDPUrl=function(e){var t=null==e?void 0:e.addressType,n=null==e?void 0:e.lat,i=null==e?void 0:e.lng;return t&&"community_address"===t&&n&&i},getShouldUseCDPUrl=function(e){var t,n=null==e?void 0:e.category,i=null==e?void 0:e.subCategory,o=null==e?void 0:null===(t=e.data)||void 0===t?void 0:t.plid;return n&&(n===ep.builderCommunity||n===ep.recentSearch&&i===ep.builderCommunity)&&o},getStaticMapBounds=function(e,t){return{north:e+.005,south:e-.005,east:t+.005,west:t-.005}},buildURL=function(e,t,n,i){void 0===t&&(t={}),void 0===i&&(i={});var o,r,a=e.category,l=e.displayName,c=t,u=c.latitude,s=c.longitude,d=getShouldUseBDPUrl(null==e?void 0:e.data),m=getShouldUseCDPUrl(e),g=Object.assign({},i),_="/homes/";if(d&&(_="/b/"),m&&(_="/community/"),n&&(_+=n+"/"),"string"==typeof l&&"CURRENT_LOCATION"!==a&&(_=d?(_=""+_+encodeSeoURLStringBldg(l)+"/")+(null==e?void 0:null===(o=e.data)||void 0===o?void 0:o.lat)+","+(null==e?void 0:null===(r=e.data)||void 0===r?void 0:r.lng)+"_ll/":m?""+_+(null==e?void 0:e.data.plid)+"_plid":""+_+encodeURIComponent(String(l).replace(/-/g,".dash.").replace(/[;\\/ ]/g,"-").replace(/%/g,"")).replace(/%2C/g,",").replace(/%23/g,".num.")+"_rb/"),"CURRENT_LOCATION"===a){if(void 0===u||void 0===s)return{error:"No location provided for CURRENT_LOCATION search"};g.userPosition=s+","+u;var f=getStaticMapBounds(u,s),S=f.north,h=f.south,p=f.east,v=f.west;g.userPositionBounds=S+","+p+","+h+","+v,g.currentLocationSearch=!0}var b=Object.keys(g).map(function(e){return e+"="+g[e]}).join("&");return b&&(_+="?"+b),_},buildURLForSemanticSearch=function(e,t){var n,i=e.displayName,o=e.regions,r=void 0===o?[]:o,a=e.filters,l=void 0===a?{}:a,c=e.queryResolutionStatus,u=void 0===c?"":c,s=Object.assign({},l,{sortSelection:{value:(null===(n=l.isForRent)||void 0===n?void 0:n.value)?"priorityscore":"globalrelevanceex"}}),d="FULL_RESOLUTION"!==u?u:null,m={filterState:s,regionSelection:r,usersSearchTerm:void 0===i?"":i};0===r.length&&delete m.regionSelection;var g="/homes/?searchQueryState="+encodeURIComponent(JSON.stringify(m));if(d&&(g+="&nlsQueryStatus="+d),(null==t?void 0:t.latitude)&&(null==t?void 0:t.longitude)){var _=t.latitude,f=t.longitude,S=t.mapBounds||getStaticMapBounds(_,f),h=S.north,p=S.south;g+="&userPosition="+f+","+_+("&userPositionBounds="+h+","+S.east+","+p)+","+S.west+"&currentLocationSearch=true"}return g},ev=["RAW_SEARCH","REGION","ADDRESS","RECENT_SEARCH","BUILDER_COMMUNITY"],eb=["REGION","ADDRESS","RECENT_SEARCH","BUILDER_COMMUNITY"];function SRPNavigationSubmitHandler(e,t,n,i,o,r){var a,l,u;if(void 0===o&&(o=!1),void 0===r&&(r=!1),!e.category)throw Error("Search submit handler invoked without category property");switch(e.category){case eh.CLAIMED_HOME:case eh.SAVED_SEARCH:a=e.url;break;case eh.SAVED_HOME:a="/savedhomes/";break;case eh.SEMANTIC:a=buildURLForSemanticSearch(e,t);break;default:a=buildURL(e,t,n,i)}a&&a.error?console.error("Search handler failed. Reason: "+a.error):"string"==typeof a&&0===a.length?console.error("Search handler did not produce a URL"):window&&window.location?(l=o,u=r,(l||u?eb:ev).includes(e.category)&&c.RecentSearchClient.addToRecentSearches(e),window.location.href=a):console.error("Failed to navigate to new search page. window.location undefined")}var eR=((o={}).selectSearchSuggestion="SELECT_SEARCH_SUGGESTION",o.rawSearch="RAW_SEARCH",o.selectRecentSearch="SELECT_RECENT_SEARCH",o.removeMultiRegion="REMOVE_MULTIREGION",o.currentLocationSearch="CURRENT_LOCATION_SEARCH",o.removeAllMultiRegion="REMOVE_ALL_MULTIREGION",o.addNthRegion="ADD_NTH_REGION",o.dismissSearch="DISMISS_SEARCH",o.queryUnderstandingResponse="QUERY_UNDERSTANDING_RESPONSE",o.searchBoxFocus="SEARCH_BOX_FOCUS",o),eE={SEARCH_BOX_FOCUS:"65",SELECT_SEARCH_SUGGESTION:"74",RAW_SEARCH:"73",SELECT_RECENT_SEARCH:"1032",REMOVE_MULTIREGION:"1069",CURRENT_LOCATION_SEARCH:"1079",REMOVE_ALL_MULTIREGION:"1082",ADD_NTH_REGION:"1081",DISMISS_SEARCH:"1080",QUERY_UNDERSTANDING_RESPONSE:"3875"},ey={SEARCH_BOX_FOCUS:"5",SELECT_SEARCH_SUGGESTION:"4",RAW_SEARCH:"4",SELECT_RECENT_SEARCH:"3",REMOVE_MULTIREGION:"3",CURRENT_LOCATION_SEARCH:"3",REMOVE_ALL_MULTIREGION:"3",ADD_NTH_REGION:"3",DISMISS_SEARCH:"3",QUERY_UNDERSTANDING_RESPONSE:"5"},eN={SEARCH_BOX_FOCUS:"16",SELECT_SEARCH_SUGGESTION:"16",RAW_SEARCH:"16",SELECT_RECENT_SEARCH:"1",REMOVE_MULTIREGION:"16",CURRENT_LOCATION_SEARCH:"16",REMOVE_ALL_MULTIREGION:"16",ADD_NTH_REGION:"16",DISMISS_SEARCH:"16",QUERY_UNDERSTANDING_RESPONSE:"278"},eC={SEARCH_BOX_FOCUS:"interaction",SELECT_SEARCH_SUGGESTION:"interaction",RAW_SEARCH:"interaction",SELECT_RECENT_SEARCH:"interaction",REMOVE_MULTIREGION:"interaction",CURRENT_LOCATION_SEARCH:"interaction",REMOVE_ALL_MULTIREGION:"interaction",ADD_NTH_REGION:"interaction",DISMISS_SEARCH:"interaction",QUERY_UNDERSTANDING_RESPONSE:"interaction"},ex={SEARCH_BOX_FOCUS:"search_component",SELECT_SEARCH_SUGGESTION:"search_field",RAW_SEARCH:"search_field",SELECT_RECENT_SEARCH:"search_field",REMOVE_MULTIREGION:"search_field",CURRENT_LOCATION_SEARCH:"search_box",REMOVE_ALL_MULTIREGION:"search_box",ADD_NTH_REGION:"search_box",DISMISS_SEARCH:"no_trigger_object",QUERY_UNDERSTANDING_RESPONSE:"search_field"},eO={SEARCH_BOX_FOCUS:"search_bar",SELECT_SEARCH_SUGGESTION:"select_search_suggestion",RAW_SEARCH:"manual_search_selection",SELECT_RECENT_SEARCH:"button_to_select_recent_search",REMOVE_MULTIREGION:"button_to_remove_multiregion",CURRENT_LOCATION_SEARCH:"current_location",REMOVE_ALL_MULTIREGION:"button_remove_regions",ADD_NTH_REGION:"add_region",DISMISS_SEARCH:"button_to_dismiss_search_dropdown",QUERY_UNDERSTANDING_RESPONSE:"query_understanding_response"},eI={SEARCH_BOX_FOCUS:"search_box_focus",SELECT_SEARCH_SUGGESTION:"search_home",RAW_SEARCH:"search_home",SELECT_RECENT_SEARCH:"search_home",REMOVE_MULTIREGION:"change_search_filter",CURRENT_LOCATION_SEARCH:"search_home",REMOVE_ALL_MULTIREGION:"search_home",ADD_NTH_REGION:"search_home",DISMISS_SEARCH:"dismiss_search",QUERY_UNDERSTANDING_RESPONSE:"search_home"},eA={SEARCH_BOX_FOCUS:["search_box_focus"],SELECT_SEARCH_SUGGESTION:["search"],RAW_SEARCH:["search"],SELECT_RECENT_SEARCH:["search"],REMOVE_MULTIREGION:["search"],CURRENT_LOCATION_SEARCH:["search"],REMOVE_ALL_MULTIREGION:["search"],ADD_NTH_REGION:["search"],DISMISS_SEARCH:["search"],QUERY_UNDERSTANDING_RESPONSE:["search"]},eT=((r={}).fullResolution="FULL_RESOLUTION",r.partialResolution="PARTIAL_RESOLUTION",r.failed="FAILED",r.error="ERROR",r),eL=["ac_ind","age_55_plus_ind","apt_ind","apt_or_condo_ind","auction_ind","bath_cnt_txt","bed_max_cnt_txt","bed_min_cnt_txt","built_year_max_nb","built_year_min_nb","city_view_ind","coming_soon_ind","condo_ind","day_on_zillow_nb","finished_basement_ind","for_rent_ind","forclosure_ind","fsba_ind","fsbo_ind","garage_ind","hoa_ind","hoa_max_amt","keywords_txt","lot_land_ind","lot_size_sqft_max_nb","lot_size_sqft_min_nb","manufactured_ind","monthly_payment_max_amt","monthly_payment_min_amt","mountain_view_ind","multi_family_ind","new_construction_ind","only_open_house_ind","park_view_ind","parking_spot_txt","pool_ind","premarket_foreclosure_ind","price_range_max_amt","price_range_min_amt","recently_sold_ind","rent_large_pets_allowed_ind","rental_accepts_application_ind","rental_cats_allowed_ind","rental_in_unit_laundry_ind","rental_parking_available_ind","rental_income_restricted_ind","rental_small_pets_allowed_ind","single_family_ind","single_story_ind","sqft_max_nb","sqft_min_nb","tour_3d_ind","townhouse_ind","unfinished_basement_ind","water_view_ind","waterfront_ind"],ek={SINGLE_STORY:"single_story_ind",INCOME_RESTRICTED:"rental_income_restricted_ind",INUNIT_LAUNDRY:"rental_in_unit_laundry_ind",ASSIGNED_PARKING:"rental_parking_available_ind",OPEN_HOUSES:"only_open_house_ind",WATER_FRONT:"waterfront_ind",AIRCONDITIONING:"ac_ind",POOL:"pool_ind",ACCEPTS_RENTAL_APPLICATIONS:"rental_accepts_application_ind",GARAGE:"garage_ind",APPROVED_VIRTUALTOUR:"tour_3d_ind"},eB={FINISHED:"finished_basement_ind",UNFINISHED:"unfinished_basement_ind"},ew={TOWNHOME:"townhouse_ind",LAND:"lot_land_ind",MANUFACTURED:"manufactured_ind",MULTIFAMILY:"multi_family_ind",APARTMENT:"apt_ind",CONDO:"condo_ind",SINGLEFAMILY:"single_family_ind"},eM={RECENTLY_SOLD:"recently_sold_ind",SOLD:"recently_sold_ind",FORECLOSED:"premarket_foreclosure_ind",FOR_RENT:"for_rent_ind",FSBA:"fsba_ind",FSBO:"fsbo_ind",AUCTION:"auction_ind",COMINGSOON:"coming_soon_ind",FORECLOSURE:"forclosure_ind",NEWCONSTRUCTION:"new_construction_ind"},eF={LARGEDOGS:"rent_large_pets_allowed_ind",SMALLDOGS:"rental_small_pets_allowed_ind",CATS:"rental_cats_allowed_ind"},eU={CITY:"city_view_ind",PARK:"park_view_ind",MOUNTAIN:"mountain_view_ind",WATER:"water_view_ind"},eD=(0,K.R)(function(e){e()}),getEnvelopeBlock=function(e){return{event_template_id:eN[e],event_template_version_id:"1",event_type_id:eE[e],event_type_version_id:ey[e],event_client_start_dtm:new Date().toISOString()}},getClickstreamBlock=function(e){return{trigger_location_nm:"search_results",trigger_type_nm:eC[e],trigger_object_nm:ex[e],trigger_source_nm:eO[e]}},getSemanticBlock=function(e){return{semantic_event_nm:eI[e],topic_tag_txt:eA[e]}},getModifiedRegionName=function(e){return e.includes(",")?e.split(",")[0]:e},createEmptyRegionFields=function(){return{city_nm:null,city_id:null,state_id:null,state_cd:null,zip_cd:null,neighborhood_nm:null,neighborhood_id:null,custom_region_ids:[],region_types:[]}},getRegionTypeFields=function(e){var t,n,i;if(isRegionSuggestion(e)||isRecentRegionSuggestion(e)){var o,r=createEmptyRegionFields(),a=getModifiedRegionName(e.displayName);switch(null===(o=e.data)||void 0===o?void 0:o.regionType){case"city":return r.city_nm=a,r.city_id=null===(t=e.data)||void 0===t?void 0:t.regionId,r;case"zipcode":return r.zip_cd=a,r;case"neighborhood":return r.neighborhood_nm=a,r.neighborhood_id=null===(n=e.data)||void 0===n?void 0:n.regionId,r;case"state":return r.state_cd=a,r.state_id=null===(i=e.data)||void 0===i?void 0:i.regionId,r;default:return r}}if(isSemanticSuggestion(e)||isRecentSemanticSuggestion(e)){var l,c,u=createEmptyRegionFields(),s=null!==(l=null===(c=e.data)||void 0===c?void 0:c.regions)&&void 0!==l?l:[];if(0===s.length)return u;u.custom_region_ids=s.map(function(e){return e.id}),u.region_types=s.map(function(e){return e.type});var d=s[0],m=getModifiedRegionName(d.displayName);switch(d.type){case"city":return u.city_nm=m,u.city_id=d.id,u;case"zipcode":return u.zip_cd=m,u;case"neighborhood":return u.neighborhood_nm=m,u.neighborhood_id=d.id,u;case"state":return u.state_cd=m,u.state_id=d.id,u;default:return u}}return createEmptyRegionFields()},getUpdatedSearchFilterBlock=function(e,t){var n,i,o,r=(null==t?void 0:t.search_filter)||{};if(!e||Q()(e))return r;var a=e.displayName,l=e.data,c=e.metadata;return r.request_id=null==c?void 0:c.requestId,r.interaction_id=null==c?void 0:c.interactionId,r.search_type_txt=isRegionSuggestion(n=e)||isRecentRegionSuggestion(n)?"REGION":isSemanticSuggestion(n)||isRecentSemanticSuggestion(n)?"NATURAL":isAddressSuggestion(n)||isRecentAddressSuggestion(n)?"ADDRESS":isRentalCommunitySuggestion(n)||isRecentRentalCommunitySuggestion(n)?"RENTAL_COMMUNITY":n.category===ep.builderCommunity||isRecentSearch(n)&&n.subCategory===ep.builderCommunity?"BUILDER_COMMUNITY":null,r.search_selection_type_txt=null==c?void 0:c.selectionType,r.selection_index_nb=null==c?void 0:c.selectionIndex,r.understood_query_txt=a,r.user_search_terms_txt=(null==c?void 0:c.rawValue)?[null==c?void 0:c.rawValue]:[],(isRegionSuggestion(e)||isRecentRegionSuggestion(e))&&(r.region_types=[null===(i=e.data)||void 0===i?void 0:i.regionType],Object.entries(getRegionTypeFields(e)).forEach(function(e){var t=(0,u.Z)(e,2),n=t[0],i=t[1];r[n]=i})),isSemanticSuggestion(e)||isRecentSemanticSuggestion(e)?(r.query_resolution_status_txt=l.queryResolutionStatus,Object.entries(getRegionTypeFields(e)).forEach(function(e){var t=(0,u.Z)(e,2),n=t[0],i=t[1];r[n]=i}),(null==c?void 0:c.searchFilterBlock)&&eL.forEach(function(e){e in r&&void 0===c.searchFilterBlock[e]&&delete r[e],void 0!==c.searchFilterBlock[e]&&(r[e]=c.searchFilterBlock[e])}),r.changed_filter_fields=null!==(o=null==c?void 0:c.searchFilterBlock.changed_filter_fields)&&void 0!==o?o:[]):r.query_resolution_status_txt=eT.fullResolution,r},getUpdatedSearchMapBlock=function(e,t){var n,i,o,r=t.search_map||{};return!e||Q()(e)||((isRegionSuggestion(e)||isRecentRegionSuggestion(e))&&(r.selected_regions_txt=[e.displayName]),(isSemanticSuggestion(e)||isRecentSemanticSuggestion(e))&&(r.selected_regions_txt=null!==(n=null===(i=e.data)||void 0===i?void 0:null===(o=i.regions)||void 0===o?void 0:o.map(function(e){return e.displayName}))&&void 0!==n?n:[])),r},getEventSpecificData=function(e,t){switch(null==e?void 0:e.category){case"RECENT_SEARCH":return Object.assign({},z()(t,["search_map","search_result"]),{semantic:getSemanticBlock(eR.selectRecentSearch),clickstream_trigger:getClickstreamBlock(eR.selectRecentSearch),envelope:getEnvelopeBlock(eR.selectRecentSearch)});case"RAW_SEARCH":return Object.assign({},t,{semantic:getSemanticBlock(eR.rawSearch),clickstream_trigger:getClickstreamBlock(eR.rawSearch),envelope:getEnvelopeBlock(eR.rawSearch)});case"CURRENT_LOCATION":return Object.assign({},t,{semantic:getSemanticBlock(eR.currentLocationSearch),clickstream_trigger:getClickstreamBlock(eR.currentLocationSearch),envelope:getEnvelopeBlock(eR.currentLocationSearch)});default:return Object.assign({},t,{semantic:getSemanticBlock(eR.selectSearchSuggestion),clickstream_trigger:getClickstreamBlock(eR.selectSearchSuggestion),envelope:getEnvelopeBlock(eR.selectSearchSuggestion)})}},getRemoveRegionEventData=function(e,t,n){var i,o=t.search_filter||{},r=t.search_map||{},a=(0,$.Z)(o.user_search_terms_txt),l=(0,$.Z)(o.custom_region_ids),c=(0,$.Z)(o.region_types),u=(0,$.Z)(r.selected_regions_txt);switch(e){case eR.removeMultiRegion:return a.splice(n-1,1),l.splice(n-1,1),c.splice(n-1,1),u.splice(n-1,1),o.user_search_terms_txt=a,o.custom_region_ids=l,o.region_types=c,r.selected_regions_txt=u,(null===(i=o.custom_region_ids)||void 0===i?void 0:i.length)||(o.city_nm=null,o.city_id=null,o.state_id=null,o.state_cd=null,o.zip_cd=null,o.neighborhood_nm=null,o.neighborhood_id=null),Object.assign({},t,{search_filter:o,search_map:r,semantic:getSemanticBlock(eR.removeMultiRegion),clickstream_trigger:getClickstreamBlock(eR.removeMultiRegion),envelope:getEnvelopeBlock(eR.removeMultiRegion)});case eR.removeAllMultiRegion:return a.splice(0),l.splice(0),c.splice(0),u.splice(0),o.user_search_terms_txt=a,o.custom_region_ids=l,o.region_types=c,o.city_nm=null,o.city_id=null,o.state_id=null,o.state_cd=null,o.zip_cd=null,o.neighborhood_nm=null,o.neighborhood_id=null,r.selected_regions_txt=u,Object.assign({},t,{search_filter:o,search_map:r,semantic:getSemanticBlock(eR.removeAllMultiRegion),clickstream_trigger:getClickstreamBlock(eR.removeAllMultiRegion),envelope:getEnvelopeBlock(eR.removeAllMultiRegion)});default:return null}},getAddRegionEventData=function(e,t,n,i,o){void 0===i&&(i=!1);var r,a,l,c=null,s=t.search_filter||{},d=t.search_map||{},m=null,g=null,_=getEventSpecificData(e,t);if(e&&(null==e?void 0:e.displayName)){if(c=getModifiedRegionName(null==e?void 0:e.displayName),(null==s?void 0:s.custom_region_ids)&&(null==s?void 0:s.region_types)||(null==s?void 0:null===(r=s.user_search_terms_txt)||void 0===r?void 0:r.length)!==1||(s.user_search_terms_txt=[],s.school_id=null),(null==e?void 0:e.data)&&(m=null==e?void 0:null===(a=e.data)||void 0===a?void 0:a.regionId,g=null==e?void 0:null===(l=e.data)||void 0===l?void 0:l.regionType,o&&(s.custom_region_ids=[],s.region_types=[],s.user_search_terms_txt=[]),(!((null==s?void 0:s.custom_region_ids)&&(null==s?void 0:s.region_types))||o)&&Object.entries(getRegionTypeFields(e)).forEach(function(e){var t=(0,u.Z)(e,2),n=t[0],i=t[1];s[n]=i})),"CURRENT_LOCATION"===e.category)s.user_search_terms_txt=[c],s.custom_region_ids=[],s.region_types=[],s.city_id=null,s.city_nm=null,s.neighborhood_id=null,s.neighborhood_nm=null,s.state_cd=null,s.state_id=null,s.zip_cd=null,d.selected_regions_txt=[];else if(n){if(i)return Object.assign({},_);s.user_search_terms_txt=[].concat((0,$.Z)((null==s?void 0:s.user_search_terms_txt)||[]),[c]),s.custom_region_ids||(s.custom_region_ids=[]),s.custom_region_ids=[].concat((0,$.Z)(s.custom_region_ids),[m]),s.region_types||(s.region_types=[]),s.region_types=[].concat((0,$.Z)(s.region_types),[g]),"RECENT_SEARCH"!==e.category&&("REGION"===e.category||(null==e?void 0:e.subCategory)==="REGION")&&(d.selected_regions_txt=[].concat((0,$.Z)((null==d?void 0:d.selected_regions_txt)||[]),[c]))}else s.user_search_terms_txt=[c],s.custom_region_ids=[m],s.region_types=[g],"RECENT_SEARCH"!==e.category&&("REGION"===e.category||(null==e?void 0:e.subCategory)==="REGION")&&(d.selected_regions_txt=[c]);return"RECENT_SEARCH"!==e.category?Object.assign({},_,{search_filter:s,search_map:d}):Object.assign({},_,{search_filter:s})}return null},fireTrackEvent=function(e){var t=e.trackEventProp,n=e.autocompleteResult,i=void 0===n?null:n,o=e.regionIndex,r=void 0===o?null:o,a=e.isMultiregionSearch,l=void 0!==a&&a,c=e.isRegionInMultiRegionSelection,u=void 0!==c&&c,s=e.eventName,d=void 0===s?"":s,m=e.clickstreamTriggerOverrides,g=void 0===m?null:m,_=e.clickstreamDecorators,f=void 0===_?null:_,S=e.screenName,h=void 0===S?"sxp":S,p=e.allowEmptyInitialClickstreamBlocks,v=void 0!==p&&p,b=e.isPointRegionSelected,R=void 0!==b&&b;eD(function(){return new Promise(function(e,n){if(o={},!(0,Y.isInitialized)())return(0,Y.track)(t),$If_5.call(this);var o,a,c=(function(e){return(function(c){try{return(a&&!Q()(a)&&(o=a),v||Object.keys(o).length)?(o=d===eR.removeMultiRegion||d===eR.removeAllMultiRegion?getRemoveRegionEventData(d,o,r):d===eR.searchBoxFocus?Object.assign({},o,{semantic:getSemanticBlock(d),clickstream_trigger:getClickstreamBlock(d),envelope:getEnvelopeBlock(d)}):getAddRegionEventData(i,o,l,u,R),g&&(o=Object.assign({},o,{clickstream_trigger:Object.assign({},o.clickstream_trigger,g)})),f&&(o=Object.assign({},o,f)),(0,Y.track)(t,{newLaneEvent:o})):(0,Y.track)(t),e&&e.call(this,c)}catch(e){return n(e)}}).bind(this)}).bind(this),s=(function(){try{return $If_5.call(this)}catch(e){return n(e)}}).bind(this),$Try_1_Catch=function(e){try{throw e}catch(e){return c(n)(e)}};try{if(!v&&h)return Promise.resolve(Y.datalayer.getAll({screenName:h})).then((function(e){try{return a=e,$If_6.call(this)}catch(e){return $Try_1_Catch(e)}}).bind(this),$Try_1_Catch);function $If_6(){return c(s)()}return $If_6.call(this)}catch(e){$Try_1_Catch(e)}function $If_5(){return e()}})})},fireEvent=function(e){var t=e.eventName,n=e.suggestion,i=void 0===n?null:n,o=e.clickstreamTriggerOverrides,r=void 0===o?null:o,a=e.clickstreamDecorators,l=void 0===a?null:a,c=e.screenName,u=void 0===c?"sxp":c,s=e.allowEmptyInitialClickstreamBlocks,d=void 0!==s&&s;eD(function(){return new Promise(function(e,n){var o,a;if(o={},(0,Y.isInitialized)()){var c=(function(e){return(function(c){try{return a&&!Q()(a)&&(o=a),(d||Object.keys(o).length)&&(o=Object.assign({},o,{semantic:getSemanticBlock(t),clickstream_trigger:getClickstreamBlock(t),envelope:getEnvelopeBlock(t)}),i&&t===eR.queryUnderstandingResponse&&(o=Object.assign({},o,{search_filter:getUpdatedSearchFilterBlock(i,o),search_map:getUpdatedSearchMapBlock(i,o)})),r&&(o=Object.assign({},o,{clickstream_trigger:Object.assign({},o.clickstream_trigger,r)})),l&&(o=Object.assign({},o,l)),(0,Y.event)(o)),e&&e.call(this,c)}catch(e){return n(e)}}).bind(this)}).bind(this),s=(function(){try{return $If_7.call(this)}catch(e){return n(e)}}).bind(this),$Try_3_Catch=function(e){try{throw e}catch(e){return c(n)(e)}};try{if(!d&&u)return Promise.resolve(Y.datalayer.getAll({screenName:u})).then((function(e){try{return a=e,$If_8.call(this)}catch(e){return $Try_3_Catch(e)}}).bind(this),$Try_3_Catch);function $If_8(){return c(s)()}return $If_8.call(this)}catch(e){$Try_3_Catch(e)}}function $If_7(){return e()}return $If_7.call(this)})})},getLabelSuggestionIndex=function(e){var t=e.chosenSuggestion,n=e.chosenIndex;return t.category+" | "+n},getLabelSuggestionIndexValue=function(e){var t,n=e.chosenSuggestion,i=e.chosenIndex,o=e.searchBoxValue;return n.category+" | "+i+" | "+(null!=o?o:"")+" | "+(null!==(t=n.displayName)&&void 0!==t?t:"")},eP={SAVED_SEARCH:{getSearchBoxClickLabel:function(e){var t,n=e.chosenSuggestion,i=e.chosenIndex;return n.category+" | "+i+" | "+(null!==(t=n.notificationCount)&&void 0!==t?t:"")}},RECENT_SEARCH:{getSearchBoxClickLabel:function(e){var t=e.chosenSuggestion,n=e.chosenIndex,i=e.allSuggestions,o=void 0===i?[]:i,isSuggestionRecentSearch=function(e){return"RECENT_SEARCH"===e.category},r=o.filter(isSuggestionRecentSearch).length,a=ee()(o,isSuggestionRecentSearch);return t.category+" | "+n+" | "+(n-a)+" | "+r}},CLAIMED_HOME:{getSearchBoxClickLabel:getLabelSuggestionIndex},SAVED_HOME:{getSearchBoxClickLabel:getLabelSuggestionIndex},CURRENT_LOCATION:{getSearchBoxClickLabel:getLabelSuggestionIndex},REGION:{getSearchBoxClickLabel:getLabelSuggestionIndexValue},SEMANTIC:{getSearchBoxClickLabel:getLabelSuggestionIndexValue},ADDRESS:{getSearchBoxClickLabel:getLabelSuggestionIndexValue},RAW_SEARCH:{getSearchBoxClickLabel:function(e){var t,n=e.chosenSuggestion,i=e.searchBoxValue;return n.category+" | "+(null!=i?i:"")+" | "+(null!==(t=n.displayName)&&void 0!==t?t:"")}},BUILDER_COMMUNITY:{getSearchBoxClickLabel:getLabelSuggestionIndexValue}};function _templateObject4(){var e=(0,en.Z)(["\n    fragment SemanticResultFields on SearchAssistanceSemanticResult {\n        nearMe\n        regionIds\n        regionTypes\n        regionDisplayIds\n        queryResolutionStatus\n        viewLatitudeDelta\n        filters {\n            basementStatusType\n            baths {\n                min\n                max\n            }\n            beds {\n                min\n                max\n            }\n            excludeTypes\n            hoaFeesPerMonth {\n                min\n                max\n            }\n            homeType\n            keywords\n            listingStatusType\n            livingAreaSqft {\n                min\n                max\n            }\n            lotSizeSqft {\n                min\n                max\n            }\n            parkingSpots {\n                min\n                max\n            }\n            price {\n                min\n                max\n            }\n            searchRentalFilters {\n                monthlyPayment {\n                    min\n                    max\n                }\n                petsAllowed\n                rentalAvailabilityDate {\n                    min\n                    max\n                }\n            }\n            searchSaleFilters {\n                daysOnZillow {\n                    min\n                    max\n                }\n            }\n            showOnlyType\n            view\n            yearBuilt {\n                min\n                max\n            }\n        }\n    }\n"]);return _templateObject4=function(){return e},e}function _templateObject3(){var e=(0,en.Z)(["\n    fragment BuilderCommunityResultFields on SearchAssistanceBuilderCommunityResult {\n        plid\n    }\n"]);return _templateObject3=function(){return e},e}function _templateObject2(){var e=(0,en.Z)(["\n    fragment RentalCommunityResultFields on SearchAssistanceRentalCommunityResult {\n        location {\n            latitude\n            longitude\n        }\n    }\n"]);return _templateObject2=function(){return e},e}function _templateObject$3(){var e=(0,en.Z)(["\n    fragment RegionResultFields on SearchAssistanceRegionResult {\n        regionId\n        subType\n    }\n"]);return _templateObject$3=function(){return e},e}var eZ=(0,ei.ZP)(_templateObject$3()),eH=(0,ei.ZP)(_templateObject2()),eG=(0,ei.ZP)(_templateObject3()),eq=(0,ei.ZP)(_templateObject4());function _templateObject$2(){var e=(0,en.Z)(["\n    query getAutocompleteResults(\n        $query: String!\n        $queryOptions: SearchAssistanceQueryOptions\n        $resultType: [SearchAssistanceResultType]\n    ) {\n        searchAssistanceResult: zgsAutocompleteRequest(\n            query: $query\n            queryOptions: $queryOptions\n            resultType: $resultType\n        ) {\n            requestId\n            results {\n                __typename\n                id\n                ...RegionResultFields\n                ...SemanticResultFields\n                ...RentalCommunityResultFields\n                ...BuilderCommunityResultFields\n            }\n        }\n    }\n    ","\n    ","\n    ","\n    ","\n"]);return _templateObject$2=function(){return e},e}var ej=(0,ei.ZP)(_templateObject$2(),eZ,eq,eH,eG),e$={},eV={category:ep.currentLocation,displayName:"Current Location"},createRegionsFromSemanticResult=function(e){if(!e.regionIds||!e.regionTypes||!e.regionDisplayIds)return[];for(var t,n=Math.min(e.regionIds.length,e.regionTypes.length,e.regionDisplayIds.length,5),i=[],o=0;o<n;o+=1)i.push({id:parseInt(e.regionIds[o],10),type:null===(t=e.regionTypes[o])||void 0===t?void 0:t.toLowerCase(),displayName:e.regionDisplayIds[o]});return i},zgsAutocompleteResultToSuggestion=function(e){var t,n;switch(e.__typename){case"SearchAssistanceRegionResult":return{category:ep.region,displayName:e.id,data:{regionId:e.regionId,regionType:e.subType.toLowerCase()}};case"SearchAssistanceSemanticResult":return{category:ep.semantic,displayName:e.id,data:{nearMeSearch:e.nearMe,filters:e.filters,regions:createRegionsFromSemanticResult(e),queryResolutionStatus:e.queryResolutionStatus,viewLatitudeDelta:e.viewLatitudeDelta}};case"SearchAssistanceAddressResult":return{category:ep.address,displayName:e.id};case"SearchAssistanceRentalCommunityResult":return{category:ep.address,displayName:e.id,data:{addressType:"community_address",lat:null===(t=e.location)||void 0===t?void 0:t.latitude,lng:null===(n=e.location)||void 0===n?void 0:n.longitude}};case"SearchAssistanceBuilderCommunityResult":return{category:ep.builderCommunity,displayName:e.id,data:{plid:e.plid}};default:return null}},fetchZgGraphSuggestions=function(e,t){return new Promise(function(n,i){o=t.zgGraphClient,r=t.graphqlQuery,a=t.autocompleteConfig,c=void 0===(l=t.extraVariables)?{}:l;var o,r,a,l,c,u,s,d,m,g,_,f,S,h,p,v,$Try_1_Catch=function(e){try{return console.error(e),Array.isArray(e.cause)&&e.cause.forEach(function(e){var t=e.message;t&&console.error(t)}),n({suggestions:[],requestError:e})}catch(e){return i(e)}};try{return m=a.abKey,g=a.userSearchContext,_=a.centroid,f=a.fetchLimit,S=a.resultTypes,h=Object.assign({query:e,queryOptions:{maxResults:f,userIdentity:{abKey:m},userSearchContext:g},resultType:S},c),(null==_?void 0:_.lat)&&(null==_?void 0:_.lon)&&(h.queryOptions.userLocation={latitude:_.lat,longitude:_.lon}),Promise.resolve(o.query({query:r,variables:h})).then(function(e){try{if(p=e.data,v=e.errors,!p)throw Error("Error(s) encountered querying search-assistance-zillow",{cause:v});return n({suggestions:null!==(u=null==p?void 0:null===(s=p.searchAssistanceResult)||void 0===s?void 0:s.results.map(zgsAutocompleteResultToSuggestion).filter(Boolean))&&void 0!==u?u:[],requestId:null==p?void 0:null===(d=p.searchAssistanceResult)||void 0===d?void 0:d.requestId})}catch(e){return $Try_1_Catch(e)}},$Try_1_Catch)}catch(e){$Try_1_Catch(e)}})};function defaultFetchSuggestions(e,t,n,i,o,r,a){return new Promise(function(l,c){var s,d,m,g,_,f,S,h,p,v,b,R,E;return(d=t.latitude,m=t.longitude,void 0===o&&(o=3),void 0===r&&(r=void 0),void 0===a&&(a=!1),g=n.disableCurrentLocation,_=Object.assign({},n),e$[f=n.clientId||"default-key"]=null!==(s=e$[f])&&void 0!==s?s:{},S=e$[f],void 0!==d&&void 0!==m&&(_.centroid={lat:d,lon:m}),i===e_&&(S.autocompleteManager=null),_.centroid&&(_.centroid.lat!==S.latitude||_.centroid.lon!==S.longitude)&&(S.latitude=_.centroid.lat,S.longitude=_.centroid.lon,S.autocompleteManager=null),S.autocompleteManager||(S.autocompleteManager=new et.ZP(_)),h=e.length<o||"input-focused"===i||i===e_,p=function(){return S.autocompleteManager.fetchResults("",[et.yq.RECENT_SEARCH,et.yq.SAVED_HOMES,et.yq.SAVED_SEARCH],_).then(function(e){return g?e:[eV].concat((0,$.Z)(e))})},r)?(v=Object.assign({},_,{fetchLimit:h?3:10}),Promise.resolve(Promise.all([fetchZgGraphSuggestions(h?"":e,{zgGraphClient:r,graphqlQuery:ej,autocompleteConfig:v}),h?p():Promise.resolve([])])).then(function(e){try{return R=(b=(0,u.Z)(e,2))[0],E=b[1],l({suggestions:[].concat((0,$.Z)(E),(0,$.Z)(R.suggestions)),requestId:R.requestId})}catch(e){return c(e)}},c)):(a&&(_.fetchLimit=h?void 0:10),l(h?p():S.autocompleteManager.fetchResults(e,[et.yq.REGION,et.yq.ADDRESS],_)))})}function defaultFilterSuggestions(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!1);var i,o,r=e.filter(function(e){return e.category===ep.currentLocation}),a=e.filter(function(e){return e.category===ep.savedSearch});a.splice(2);var l=e.filter(function(e){return e.category===ep.claimedHome});l.splice(1);var c=e.filter(function(e){return e.category===ep.savedHome});c.splice(1);var u=(i=t,o=n,e.filter(function(e){var t=e.category,n=e.subCategory;return t===ep.recentSearch&&(o?[ep.semantic,ep.region,ep.address,ep.builderCommunity].includes(n):i?[ep.region,ep.address,ep.builderCommunity].includes(n):null===n||![ep.semantic,ep.currentLocation].includes(n))}));u.splice(3);var s=e.filter(function(e){return[ep.region,ep.address,ep.semantic,ep.builderCommunity].indexOf(e.category)>=0});return s.splice(10),[].concat(r,a,l,c,u,s)}function getSuggestionValue(e){var t=e.category,n=e.displayName;return[ep.region,ep.semantic,ep.address,ep.recentSearch,ep.rawSearch].indexOf(t)>=0?n:""}var ez={DESKTOP:{placeholderText:"Enter an address, neighborhood, city, or ZIP code"},DESKTOP_RESULTS_PAGE:{placeholderText:"Address, neighborhood, city, ZIP"},MOBILE:{placeholderText:"Address, neighborhood, city, ZIP",supportsLocationIcon:!0},MOBILE_RESULTS_PAGE:{placeholderText:"Address, neighborhood, city, ZIP",supportsLocationIcon:!0}},eW=["FOR_SALE","FSBA","FSBO","AUCTION","COMINGSOON","FORECLOSURE","NEWCONSTRUCTION"],eQ={SINGLE_STORY:"singleStory",INCOME_RESTRICTED:"onlyRentalIncomeRestricted",INUNIT_LAUNDRY:"onlyRentalInUnitLaundry",ASSIGNED_PARKING:"onlyRentalParkingAvailable",OPEN_HOUSES:"isOpenHousesOnly",WATER_FRONT:"isWaterfront",AIRCONDITIONING:"hasAirConditioning",POOL:"hasPool",ACCEPTS_RENTAL_APPLICATIONS:"onlyRentalAcceptsApplications",GARAGE:"hasGarage",APPROVED_VIRTUALTOUR:"is3dHome"},eY={FINISHED:"isBasementFinished",UNFINISHED:"isBasementUnfinished"},eK={TOWNHOME:"isTownhouse",LAND:"isLotLand",MANUFACTURED:"isManufactured",MULTIFAMILY:"isMultiFamily",APARTMENT:"isApartment",CONDO:"isCondo",SINGLEFAMILY:"isSingleFamily"},eX={RECENTLY_SOLD:"isRecentlySold",SOLD:"isRecentlySold",PREFORECLOSURE:"isPreMarketPreForeclosure",FORECLOSED:"isPreMarketForeclosure",FOR_RENT:"isForRent",FSBA:"isForSaleByAgent",FSBO:"isForSaleByOwner",AUCTION:"isAuction",COMINGSOON:"isComingSoon",FORECLOSURE:"isForSaleForeclosure",NEWCONSTRUCTION:"isNewConstruction"},eJ={LARGEDOGS:"onlyRentalLargeDogsAllowed",SMALLDOGS:"onlyRentalSmallDogsAllowed",CATS:"onlyRentalCatsAllowed"},e0={CITY:"isCityView",PARK:"isParkView",MOUNTAIN:"isMountainView",WATER:"isWaterView"},e1=((l={})[1]="1",l[7]="7",l[14]="14",l[30]="30",l[90]="90",l[182]="6m",l[365]="12m",l[730]="24m",l[1095]="36m",l),roundToNearest=function(e,t,n){return("up"===n?Math.ceil:Math.floor)(e/t)*t},getValueBounds=function(e,t){var n;return null!==(n=t.find(function(t){var n=(0,u.Z)(t,2),i=n[0],o=n[1];return i<=e&&e<=o}))&&void 0!==n?n:[]},getAreaValue=function(e,t,n){var i=t[0][0],o=t[t.length-1][1];if(e<i)return"min"===n?null:i;if(e>o)return"min"===n?o:null;var r=getValueBounds(e,t),a=(0,u.Z)(r,2),l=a[0],c=a[1];return e===l||e===c?e:"min"===n?l:c},getInitialSearchFilterState=function(e){return Object.values(e).reduce(function(e,t){return e[t]={value:!1},e},{})},getSearchFilterState=function(e,t){return e.reduce(function(e,n){return n&&n in t&&(e[t[n]]={value:!0}),e},{})},getInitialSearchFilterBlock=function(e){return Object.values(e).reduce(function(e,t){return e[t]=!1,e},{})},getSearchFilterBlock=function(e,t){return e.reduce(function(e,n){return n&&n in t&&(e[t[n]]=!0),e},{})},e2={baths:{toSearchFilterState:function(e){return(null==e?void 0:e.min)?{baths:{min:e.min,max:null}}:{}},toSearchFilterBlock:function(e){var t;return{bath_cnt_txt:null==e?void 0:null===(t=e.min)||void 0===t?void 0:t.toString()}}},beds:{toSearchFilterState:function(e){if(e){var t=e.min,n=e.max;return{beds:{min:void 0===t?null:t,max:void 0===n?null:n}}}return{}},toSearchFilterBlock:function(e){var t,n;return{bed_min_cnt_txt:null==e?void 0:null===(t=e.min)||void 0===t?void 0:t.toString(),bed_max_cnt_txt:null==e?void 0:null===(n=e.max)||void 0===n?void 0:n.toString()}}},hoaFeesPerMonth:{transform:function(e){return"number"!=typeof(null==e?void 0:e.max)?e:e.max>1e3?{max:null}:e.max<75?{max:roundToNearest(e.max,50,"up")}:{max:roundToNearest(e.max,100,"up")}},toSearchFilterState:function(e){return"number"==typeof(null==e?void 0:e.max)||(null==e?void 0:e.max)===null?{hoa:{min:null,max:e.max}}:{}},toSearchFilterBlock:function(e){var t;return{hoa_max_amt:null!==(t=null==e?void 0:e.max)&&void 0!==t?t:void 0}}},livingAreaSqft:{transform:function(e){if(e){var t=e.min,n=e.max,i=[[500,750],[750,1e3],[1e3,1250],[1250,1500],[1500,1750],[1750,2e3],[2e3,2250],[2250,2500],[2500,2750],[2750,3e3],[3e3,3500],[3500,4e3],[4e3,5e3],[5e3,7500]];return{min:t?getAreaValue(t,i,"min"):null,max:n?getAreaValue(n,i,"max"):null}}return e},toSearchFilterState:function(e){if(e){var t=e.min,n=e.max;return{sqft:{min:void 0===t?null:t,max:void 0===n?null:n}}}return{}},toSearchFilterBlock:function(e){var t,n;return{sqft_min_nb:null!==(t=null==e?void 0:e.min)&&void 0!==t?t:void 0,sqft_max_nb:null!==(n=null==e?void 0:e.max)&&void 0!==n?n:void 0}}},lotSizeSqft:{transform:function(e){if(e){var t=e.min,n=e.max,i=[[1e3,2e3],[2e3,3e3],[4e3,5e3],[5e3,7500],[7500,10890],[10890,21780],[21780,43560],[43560,87120],[87120,217800],[217800,435600],[435600,871200],[871200,2178e3],[2178e3,4356e3]];return{min:t?getAreaValue(t,i,"min"):null,max:n?getAreaValue(n,i,"max"):null}}return e},toSearchFilterState:function(e){if(e){var t=e.min,n=e.max;return{lotSize:{min:void 0===t?null:t,max:void 0===n?null:n}}}return{}},toSearchFilterBlock:function(e){var t,n;return{lot_size_sqft_min_nb:null!==(t=null==e?void 0:e.min)&&void 0!==t?t:void 0,lot_size_sqft_max_nb:null!==(n=null==e?void 0:e.max)&&void 0!==n?n:void 0}}},parkingSpots:{toSearchFilterState:function(e){return(null==e?void 0:e.min)?{parkingSpots:{min:e.min,max:null}}:{}},toSearchFilterBlock:function(e){var t;return{parking_spot_txt:null==e?void 0:null===(t=e.min)||void 0===t?void 0:t.toString()}}},price:{toSearchFilterState:function(e){if(e){var t=e.min,n=e.max;return{price:{min:void 0===t?null:t,max:void 0===n?null:n}}}return{}},toSearchFilterBlock:function(e){var t,n;return{price_range_min_amt:null!==(t=null==e?void 0:e.min)&&void 0!==t?t:void 0,price_range_max_amt:null!==(n=null==e?void 0:e.max)&&void 0!==n?n:void 0}}},yearBuilt:{toSearchFilterState:function(e){if(e){var t=e.min,n=e.max;return{built:{min:void 0===t?null:t,max:void 0===n?null:n}}}return{}},toSearchFilterBlock:function(e){var t,n;return{built_year_min_nb:null!==(t=null==e?void 0:e.min)&&void 0!==t?t:void 0,built_year_max_nb:null!==(n=null==e?void 0:e.max)&&void 0!==n?n:void 0}}},searchRentalFilters:{toSearchFilterState:function(e){var t,n={};if(null==e?void 0:e.monthlyPayment){var i=e.monthlyPayment,o=i.min,r=i.max;n.monthlyPayment={min:void 0===o?null:o,max:void 0===r?null:r}}if(null==e?void 0:null===(t=e.petsAllowed)||void 0===t?void 0:t.length){var a=e.petsAllowed;n=Object.assign({},n,getInitialSearchFilterState(eJ),getSearchFilterState(a,eJ))}return n},toSearchFilterBlock:function(e){var t,n,i,o;return Object.assign({},{monthly_payment_min_amt:null!==(t=null==e?void 0:null===(n=e.monthlyPayment)||void 0===n?void 0:n.min)&&void 0!==t?t:void 0,monthly_payment_max_amt:null!==(i=null==e?void 0:null===(o=e.monthlyPayment)||void 0===o?void 0:o.max)&&void 0!==i?i:void 0},(null==e?void 0:e.petsAllowed)?Object.assign({},getInitialSearchFilterBlock(eF),getSearchFilterBlock(e.petsAllowed,eF)):{})}},searchSaleFilters:{transform:function(e){var t;if(null==e?void 0:null===(t=e.daysOnZillow)||void 0===t?void 0:t.max){var n,i,o,r,a,l=(i=getValueBounds(n=e.daysOnZillow.max,[[1,7],[7,14],[14,30],[30,90],[90,182],[182,365],[365,730],[730,1095]]),r=(o=(0,u.Z)(i,2))[0],a=o[1],n===r||n===a?n:"number"==typeof r&&"number"==typeof a?a:null);return Object.assign({},e,{daysOnZillow:{min:null,max:l}})}return e},toSearchFilterState:function(e){var t,n=null==e?void 0:null===(t=e.daysOnZillow)||void 0===t?void 0:t.max;return n&&n in e1?{doz:{value:e1[n]}}:{}},toSearchFilterBlock:function(e){var t,n;return{day_on_zillow_nb:null!==(t=null==e?void 0:null===(n=e.daysOnZillow)||void 0===n?void 0:n.max)&&void 0!==t?t:void 0}}},keywords:{toSearchFilterState:function(e){return e?{keywords:{value:e.toString()}}:{}},toSearchFilterBlock:function(e){return{keywords_txt:null==e?void 0:e.toString().replace(/\s*,\s*/g,",").split(",")}}},showOnlyType:{toSearchFilterState:function(e){return(null==e?void 0:e.length)?Object.assign({},getInitialSearchFilterState(eQ),getSearchFilterState(e,eQ)):{}},toSearchFilterBlock:function(e){var t=getInitialSearchFilterBlock(ek);return e?Object.assign({},t,getSearchFilterBlock(e,ek)):t}},basementStatusType:{toSearchFilterState:function(e){return(null==e?void 0:e.length)?Object.assign({},getInitialSearchFilterState(eY),getSearchFilterState(e,eY)):{}},toSearchFilterBlock:function(e){var t=getInitialSearchFilterBlock(eB);return e?Object.assign({},t,getSearchFilterBlock(e,eB)):t}},homeType:{toSearchFilterState:function(e){return(null==e?void 0:e.length)?Object.assign({},getInitialSearchFilterState(eK),getSearchFilterState(e,eK),{isApartmentOrCondo:{value:e.includes("APARTMENT")||e.includes("CONDO")}}):{}},toSearchFilterBlock:function(e){var t=Object.assign({},getInitialSearchFilterBlock(ew),{apt_or_condo_ind:!1});return(null==e?void 0:e.length)?Object.assign({},t,getSearchFilterBlock(e,ew),{apt_or_condo_ind:e.includes("APARTMENT")||e.includes("CONDO")}):t}},listingStatusType:{transform:function(e){return(null==e?void 0:e.length)?e.includes("FOR_SALE")?(0,$.Z)(eW):e.includes("SOLD")&&e.length>1?e.filter(function(e){return"SOLD"!==e}):e:e},toSearchFilterState:function(e){return(null==e?void 0:e.length)?Object.assign({},getInitialSearchFilterState(eX),getSearchFilterState(e,eX)):{}},toSearchFilterBlock:function(e){var t=getInitialSearchFilterBlock(eM);return e?Object.assign({},t,getSearchFilterBlock(e,eM)):t}},view:{toSearchFilterState:function(e){return(null==e?void 0:e.length)?Object.assign({},getInitialSearchFilterState(e0),getSearchFilterState(e,e0)):{}},toSearchFilterBlock:function(e){var t=getInitialSearchFilterBlock(eU);return e?Object.assign({},t,getSearchFilterBlock(e,eU)):t}},excludeTypes:{toSearchFilterState:function(e){var t={};return(null==e?void 0:e.includes("NO_HOA_DATA"))&&(t.includeHomesWithNoHoaData={value:!1}),(null==e?void 0:e.includes("SENIOR_COMMUNITY"))&&(t.ageRestricted55Plus={value:"e"}),t},toSearchFilterBlock:function(e){var t={hoa_ind:!0,age_55_plus_ind:!0};return(null==e?void 0:e.includes("NO_HOA_DATA"))&&(t.hoa_ind=!1),(null==e?void 0:e.includes("SENIOR_COMMUNITY"))&&(t.age_55_plus_ind=!1),t}}},getUpdatedFilterData=function(e){var t={filterState:{},filterBlock:{changed_filter_fields:[]}};return e&&Object.entries(e).forEach(function(e){var n=(0,u.Z)(e,2),i=n[0],o=n[1];if(i in e2&&null!==o){var r,a,l=e2[i],c=ea()(null!==(r=l.transform)&&void 0!==r?r:ec(),l.toSearchFilterState)(o),s=ea()(null!==(a=l.transform)&&void 0!==a?a:ec(),l.toSearchFilterBlock)(o);Object.assign(t.filterState,c),Object.assign(t.filterBlock,s),Object.entries(s).forEach(function(e){var n,i=(0,u.Z)(e,2),o=i[0];void 0!==i[1]&&(null===(n=t.filterBlock.changed_filter_fields)||void 0===n||n.push(o))})}}),t},isSimpleFilterChange=function isSimpleFilterChange(e){var t=["listingStatusType","homeType","userSearchContext"];return Object.entries(e).every(function(e){var n=(0,u.Z)(e,2),i=n[0],o=n[1];return"object"!==(0,eo.Z)(o)||null===o||Array.isArray(o)?t.includes(i)||null===o:isSimpleFilterChange(o)})},useOnClickInsideOutside=function(e,t,n){(0,s.useEffect)(function(){var listener=function(i){var o=i.target;e.current&&(e.current.contains(o)?null==t||t(o):null==n||n())};return document.addEventListener("click",listener),function(){document.removeEventListener("click",listener)}},[e,n,t])};function _templateObject$1(){var e=(0,en.Z)(["\n    query getQueryUnderstandingResults(\n        $query: String!\n        $queryOptions: SearchAssistanceQueryOptions\n        $querySource: SearchAssistanceQuerySource = UNKNOWN\n        $resultType: [SearchAssistanceResultType]\n    ) {\n        searchAssistanceResult: zgsQueryUnderstandingRequest(\n            query: $query\n            queryOptions: $queryOptions\n            querySource: $querySource\n            resultType: $resultType\n        ) {\n            requestId\n            results {\n                __typename\n                id\n                ...RegionResultFields\n                ...SemanticResultFields\n                ...RentalCommunityResultFields\n            }\n        }\n    }\n    ","\n    ","\n    ","\n"]);return _templateObject$1=function(){return e},e}var e3=(0,ei.ZP)(_templateObject$1(),eZ,eq,eH),useMaximizeListboxHeight=function(e,t){void 0===t&&(t=16),(0,s.useEffect)(function(){var n=new MutationObserver(function(){var n,i=null===(n=e.current)||void 0===n?void 0:n.querySelector('[role="listbox"]');i&&window.requestAnimationFrame(function(){i.style.maxHeight="calc(100vh - ("+i.getBoundingClientRect().top+"px + "+t+"px))"})});return e.current&&n.observe(e.current,{childList:!0,subtree:!0}),function(){n.disconnect()}},[e,t])},e5=void 0,e7="/builds/zillow/searchxp/static-search-box/src/components/SearchBoxOption.tsx",e4=d.default.span.withConfig({displayName:"SearchBoxOption__StyledListboxOptionLabelText",componentId:"sxp-sb__sc-1rb3buu-0"})(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),e8=(0,d.default)(g.O).withConfig({displayName:"SearchBoxOption__StyledListboxOptionLabel",componentId:"sxp-sb__sc-1rb3buu-1"})(["display:flex;"]),e6=(0,d.default)(_.n).withConfig({displayName:"SearchBoxOption__StyledListboxOptionLabelGleam",componentId:"sxp-sb__sc-1rb3buu-2"})(["align-self:center;margin-left:auto;"]),e9=(0,s.memo)(function(e){var t=e.label,n=e.notificationCount,i=e.currentSearchTerm,o=e.getHighlightPattern;return s.createElement(e8,{__self:e5,__source:{fileName:e7,lineNumber:47,columnNumber:9}},s.createElement(e4,{__self:e5,__source:{fileName:e7,lineNumber:48,columnNumber:13}},s.createElement(f.o,{text:t,pattern:o(getSuggestionValue(i)),__self:e5,__source:{fileName:e7,lineNumber:49,columnNumber:17}})),n?s.createElement(e6,{count:n,maxSuffix:!0,__self:e5,__source:{fileName:e7,lineNumber:55,columnNumber:17}}):null)}),useSearchBoxOption=function(e){var t=e.autocompleteSource,n=e.currentSearchTerm,i=(0,s.useCallback)(function(e){return"remote"===t&&e.trim()?e:null},[t]);return(0,s.useCallback)(function(e){var t=e.label,o=e.notificationCount,r=e.onOptionClick;return s.createElement(S.O,(0,eu.Z)({},e,{onOptionClick:r?(0,K.R)(r):r,label:"string"==typeof t?s.createElement(e9,{label:t,notificationCount:o,currentSearchTerm:n,getHighlightPattern:i,__self:e5,__source:{fileName:e7,lineNumber:110,columnNumber:29}}):t,__self:e5,__source:{fileName:e7,lineNumber:103,columnNumber:17}}))},[n,i])},te="/builds/zillow/searchxp/static-search-box/src/LocationAccessButton.jsx",tt=function(e){function LocationAccessButton(t){var n;return(n=e.call(this,t)||this)._requestLocationAccess=n._requestLocationAccess.bind((0,ed.Z)(n)),n}(0,em.Z)(LocationAccessButton,e);var t=LocationAccessButton.prototype;return t._requestLocationAccess=function(e){e.preventDefault(),n.g.navigator&&n.g.navigator.geolocation?n.g.navigator.geolocation.getCurrentPosition(this.props.onLocationAccessGranted,this.props.onLocationAccessFailed):console.warn("No location object available")},t.render=function(){var e=this,t=this.props,n=t.isCurrentLocationSearch,i=t.isUserPositionInMapBounds,o=t.onReCenter,r=t.enableNaturalLanguageSearch,a=t.size,l=t.padding;return s.createElement(R.h,{ref:this.props.buttonRef,title:"Use your location",onMouseDown:n?o:this._requestLocationAccess,icon:n&&!i?s.createElement(function(t){return r?s.createElement(h.C,(0,eu.Z)({},t,{__self:e,__source:{fileName:te,lineNumber:45,columnNumber:17}})):s.createElement(p.Z,(0,eu.Z)({},t,{__self:e,__source:{fileName:te,lineNumber:47,columnNumber:17}}))},{__self:this}):s.createElement(function(t){return r?s.createElement(v.Z,(0,eu.Z)({},t,{__self:e,__source:{fileName:te,lineNumber:52,columnNumber:17}})):s.createElement(b.Z,(0,eu.Z)({},t,{__self:e,__source:{fileName:te,lineNumber:54,columnNumber:17}}))},{__self:this}),size:a,padding:l,type:"button",bare:!0,__self:this,__source:{fileName:te,lineNumber:58,columnNumber:13}})},LocationAccessButton}(s.Component);tt.propTypes={},tt.defaultProps={onLocationAccessGranted:function(){},onLocationAccessFailed:function(){},isUserPositionInMapBounds:!0,onReCenter:function(){},isCurrentLocationSearch:!1,size:E.G.sm,padding:{}};var tn="/builds/zillow/searchxp/static-search-box/src/components/SearchBoxInput.tsx",ti=void 0,to=/^\[[A-Z_]+\]/g,tr=(0,d.default)(y.u).withConfig({displayName:"SearchBoxInput__StyledSearchBoxAdornment",componentId:"sxp-sb__sc-1hknwe6-0"})(["padding:0 0 0 5px;border-radius:0 ","px ","px 0;button{border-radius:0;&:focus{z-index:1;}&:last-of-type{border-radius:0 ","px ","px 0;}}"],(0,N.Z)("radii.md"),(0,N.Z)("radii.md"),(0,N.Z)("radii.md"),(0,N.Z)("radii.md")),ta=(0,s.memo)((0,d.default)(R.h).withConfig({displayName:"SearchBoxInput__StyledClearButton",componentId:"sxp-sb__sc-1hknwe6-1"})(["",""],function(e){return e.hideButton&&"display: none !important;"})),tl=(0,s.memo)((0,d.default)(R.h).withConfig({displayName:"SearchBoxInput__StyledSearchBoxButton",componentId:"sxp-sb__sc-1hknwe6-2"})(["&:focus{box-shadow:none;}"])),getAdornmentToShow=function(e){var t=e.disableCurrentLocation,n=e.showLocationIcon,i=e.supportsLocationIcon,o=e.isCurrentLocationSearch,r=e.enableNaturalLanguageSearch,a=e.currentSearchTerm.displayName;return!t&&n&&(i&&!r||o)?"location":a&&r?"clear":"search"},tc=s.createElement(C.Z,{__self:void 0,__source:{fileName:tn,lineNumber:123,columnNumber:25}}),tu=s.createElement(x.Z,{__self:void 0,__source:{fileName:tn,lineNumber:124,columnNumber:20}}),adornmentMouseDown=function(e){e.preventDefault()},submitButtonOnClick=function(e){e.stopPropagation()},ts=(0,s.memo)(function(e){var t=e.supportsLocationIcon,n=e.disableCurrentLocation,i=e.showLocationIcon,o=e.isCurrentLocationSearch,r=e.currentSearchTerm,a=e.enableNaturalLanguageSearch,l=e.size,c=e.padding,u=e.clearInput,d=e.clearButtonRef,m=e.submitButtonRef,g=e.currentLocationButtonRef,_=e.onLocationAccessGranted,f=e.onLocationAccessFailed,S=e.onReCenter,h=e.isUserPositionInMapBounds,p=getAdornmentToShow({disableCurrentLocation:n,showLocationIcon:i,supportsLocationIcon:t,isCurrentLocationSearch:o,enableNaturalLanguageSearch:a,currentSearchTerm:r}),v=(0,s.useCallback)(function(e){if("Enter"===e.key||" "===e.key){var t;u(),null===(t=d.current)||void 0===t||t.blur()}},[d,u]);return"location"===p?s.createElement(tt,{buttonRef:g,size:l,padding:c,onLocationAccessGranted:_,onLocationAccessFailed:f,isCurrentLocationSearch:o,isUserPositionInMapBounds:h,onReCenter:S,enableNaturalLanguageSearch:a,__self:ti,__source:{fileName:tn,lineNumber:175,columnNumber:17}}):a?s.createElement(s.Fragment,{__self:ti,__source:{fileName:tn,lineNumber:191,columnNumber:17}},s.createElement(ta,{size:l,padding:c,bare:!0,hideButton:"clear"!==p,icon:tc,onMouseDown:adornmentMouseDown,onMouseUp:u,onKeyUp:v,ref:d,title:"clear search text button",type:"button",tabIndex:"clear"!==p?-1:0,__self:ti,__source:{fileName:tn,lineNumber:192,columnNumber:21}}),s.createElement(R.h,{ref:m,size:l,padding:c,title:"Submit Search",icon:tu,type:"submit",onClick:submitButtonOnClick,bare:!0,__self:ti,__source:{fileName:tn,lineNumber:207,columnNumber:21}})):s.createElement(tl,{ref:m,size:l,padding:c,title:"Submit Search",icon:tu,buttonType:"secondary",type:"submit",onClick:submitButtonOnClick,bare:!0,__self:ti,__source:{fileName:tn,lineNumber:222,columnNumber:13}})}),useSearchBoxInput=function(e){var t=e.supportsLocationIcon,n=e.disableCurrentLocation,i=e.showLocationIcon,o=e.isCurrentLocationSearch,r=e.size,a=e.buttonPadding,l=e.inputPadding,c=e.clearInput,u=e.isUserPositionInMapBounds,d=e.currentSearchTerm,m=e.enableNaturalLanguageSearch,g=e.onLocationAccessGranted,_=e.onLocationAccessFailed,f=e.onReCenter,S=e.inputRef,h=e.clearButtonRef,p=e.submitButtonRef,v=e.currentLocationButtonRef,b=e.onBlur,R=e.showAdornments,E=e.renderInput;return(0,s.useCallback)(function(e){e.onClear,e.onTagClose;var y=e.onBlur,N=e.value,C=Object.assign({},(0,es.Z)(e,["onClear","onTagClose","onBlur","value"]),l,{autoComplete:"off",enterKeyHint:"search",onBlur:function(e){b(e,y)},value:N.replace(to,"")});return E?E(Object.assign({ref:S},C)):R?s.createElement(O._,{input:s.createElement(I.I,(0,eu.Z)({ref:S},C,{"aria-label":"Search",__self:ti,__source:{fileName:tn,lineNumber:303,columnNumber:32}})),rightAdornment:s.createElement(tr,{"aria-hidden":"false",__self:ti,__source:{fileName:tn,lineNumber:305,columnNumber:29}},s.createElement(ts,{supportsLocationIcon:t,disableCurrentLocation:n,showLocationIcon:i,isCurrentLocationSearch:o,currentSearchTerm:d,enableNaturalLanguageSearch:m,size:r,padding:a,clearInput:c,clearButtonRef:h,submitButtonRef:p,currentLocationButtonRef:v,onLocationAccessGranted:g,onLocationAccessFailed:_,onReCenter:f,isUserPositionInMapBounds:u,__self:ti,__source:{fileName:tn,lineNumber:306,columnNumber:33}})),__self:ti,__source:{fileName:tn,lineNumber:302,columnNumber:21}}):s.createElement(I.I,(0,eu.Z)({ref:S},C,{"aria-label":"Search",__self:ti,__source:{fileName:tn,lineNumber:329,columnNumber:20}}))},[a,h,c,v,d,n,m,l,S,o,u,b,_,g,f,E,R,i,r,p,t])},td=void 0,tm="/builds/zillow/searchxp/static-search-box/src/SearchBox.tsx",tg=(0,s.memo)((0,d.default)(A.h).withConfig({displayName:"SearchBox__StyledCombobox",componentId:"sxp-sb__sc-1romu78-0"})(["@media screen and (min-width:890px){&&& [role='listbox'],&&& [role='dialog']{","}}@media screen and (max-width:889px){&&& [role='listbox'],&&& [role='dialog']{width:100vw !important;}}&&& [role='listbox'],&&& [role='dialog']{height:auto;z-index:100;}input,label{background-color:",";border:none;}input{text-overflow:ellipsis;}"],function(e){return e.enableNaturalLanguageSearch&&"min-width: 540px;"},(0,N.Z)("colors.backgroundWhite"))),t_=(0,d.default)(T.l).withConfig({displayName:"SearchBox__StyledForm",componentId:"sxp-sb__sc-1romu78-1"})(["border:1px solid;border-radius:","px;border-color:",";background-color:",";&:active,&:hover,&:focus{border-color:",";}"],(0,N.Z)("radii.md"),(0,N.Z)("colors.gray300"),(0,N.Z)("colors.backgroundWhite"),(0,N.Z)("colors.blue400")),createUniqueOptionValue$1=function(e,t){return"["+t+"]"+e},getSuggestionCategoryIcon$1=function(e,t){switch(void 0===t&&(t=!1),e){case ep.region:return s.createElement(p.Z,{__self:td,__source:{fileName:tm,lineNumber:137,columnNumber:20}});case ep.semantic:return s.createElement(L.Z,{__self:td,__source:{fileName:tm,lineNumber:139,columnNumber:20}});case ep.currentLocation:return t?s.createElement(p.Z,{__self:td,__source:{fileName:tm,lineNumber:141,columnNumber:50}}):s.createElement(b.Z,{__self:td,__source:{fileName:tm,lineNumber:141,columnNumber:76}});case ep.recentSearch:return t?s.createElement(k.Z,{__self:td,__source:{fileName:tm,lineNumber:143,columnNumber:50}}):s.createElement(B.Z,{__self:td,__source:{fileName:tm,lineNumber:143,columnNumber:73}});case ep.savedSearch:return t?s.createElement(w.Z,{"data-test":"saved-search-icon",__self:td,__source:{fileName:tm,lineNumber:146,columnNumber:17}}):s.createElement(M.Z,{"data-test":"saved-search-icon",__self:td,__source:{fileName:tm,lineNumber:148,columnNumber:17}});case ep.savedHome:case ep.claimedHome:return s.createElement(F.Z,{__self:td,__source:{fileName:tm,lineNumber:152,columnNumber:20}});default:return null}},convertLocalSuggestionsToOptions=function(e,t){if(void 0===t&&(t=!1),!t)return e.map(function(e,t){var n=e.displayName,i=e.category,o=e.notificationCount;return{index:t,label:n,value:createUniqueOptionValue$1(null!=n?n:"",i),icon:getSuggestionCategoryIcon$1(i),notificationCount:o}});var n,i=((n={})[ep.currentLocation]=[{label:"Current Location",visuallyHidden:!0}],n[ep.recentSearch]=[{label:"Search History"}],n[ep.semantic]=[{label:"Suggested Searches"}],n[ep.savedSearch]=[{label:"Saved Searches"}],n);return e.forEach(function(e,n){var o=e.displayName,r=e.category,a=e.notificationCount;i[r]&&i[r].push({index:n,label:o,value:createUniqueOptionValue$1(null!=o?o:"",r),icon:getSuggestionCategoryIcon$1(r,t),notificationCount:a})}),Object.values(i).filter(function(e){return e.length>1})},suggestionsToString=function(e){return e.map(function(e){var t=e.displayName;return createUniqueOptionValue$1(null!=t?t:"",e.category)}).join(",")},tf=[],tS={displayName:"",category:"RAW_SEARCH"},defaultFetchSuggestionsError=function(e){return console.error(e)},th={category:"searchbox",getClickActionName:function(e){return"RAW_SEARCH"===e?"submit":"select-suggestion"},getFocusActionName:function(){return"focus"}},tp=s.createRef(),emptyFunction=function(){},SearchBox$2=function(e){var t,i=e.abKey,o=e.allowEmptyInitialClickstreamBlocks,r=void 0!==o&&o,a=e.centroid,l=e.className,d=e.clickstreamDecorators,g=void 0===d?null:d,_=e.clickstreamTriggerOverrides,f=void 0===_?null:_,S=e.clientId,h=e.disableCurrentLocation,p=void 0!==h&&h,v=e.enableNaturalLanguageSearch,b=void 0!==v&&v,R=e.enableNlsDelayedSemanticAc,E=void 0!==R&&R,y=e.enableNlsUiUpdatesOnly,N=void 0!==y&&y,C=e.fetchResults,x=void 0===C?defaultFetchSuggestions:C,O=e.fetchResultsError,I=void 0===O?defaultFetchSuggestionsError:O,A=e.filterResults,T=void 0===A?defaultFilterSuggestions:A,L=e.gaEventsConfig,k=void 0===L?th:L,B=e.handleChangeCallback,w=void 0===B?emptyFunction:B,M=e.handleSubmit,F=void 0===M?emptyFunction:M,Z=e.initSearchTerm,H=void 0===Z?tS:Z,G=e.inputRef,q=void 0===G?tp:G,j=e.isCurrentLocationSearch,$=e.isUserPositionInMapBounds,V=e.onClearButtonClick,z=void 0===V?emptyFunction:V,W=e.onReCenter,Q=void 0===W?emptyFunction:W,Y=e.platform,K=void 0===Y?"DESKTOP":Y,J=e.platformConfig,ee=void 0===J?ez:J,et=e.recentSearchLocalStorageKey,en=e.regionAddressAutocompleteURL,ei=e.resultTypes,eo=e.searchBoxOnPopState,er=e.searchBoxDidFocusInput,ea=e.searchBoxDidSelectOption,el=e.shouldShowSavedHomes,ec=e.shouldShowSavedSearches,eu=e.showAdornments,es=e.size,ed=void 0===es?U.E.sm:es,em=e.trackSearchBoxInputFocus,eg=void 0===em?null:em,eh=e.userSearchContext,ev=void 0===eh?"FOR_SALE":eh,eb=e.zgGraphClient,eE=e.isBuilderCommunityNameSearchEnabled,ey=e.renderInput,eN=(0,s.useState)("local"),eC=(0,u.Z)(eN,2),ex=eC[0],eO=eC[1],eI=(0,s.useState)(tf),eA=(0,u.Z)(eI,2),eT=eA[0],eL=eA[1],ek=(0,s.useState)(!1),eB=(0,u.Z)(ek,2),ew=eB[0],eM=eB[1],eF=(0,s.useState)(!1),eU=(0,u.Z)(eF,2),eD=eU[0],eZ=eU[1],eH=(0,s.useState)({}),eG=(0,u.Z)(eH,2),eq=eG[0],ej=eG[1],e$=(0,s.useState)(H),eV=(0,u.Z)(e$,2),eW=eV[0],eQ=eV[1],eY=(0,s.useState)(!0),eK=(0,u.Z)(eY,2),eX=eK[0],eJ=eK[1],e0=(0,s.useState)(null),e1=(0,u.Z)(e0,2),e2=e1[0],e5=e1[1],e7=(0,s.useState)(!1),e4=(0,u.Z)(e7,2),e8=e4[0],e6=e4[1],e9=(0,s.useState)(!1),te=(0,u.Z)(e9,2),tt=te[0],tn=te[1],ti=(0,s.useRef)(),tr=(0,s.useRef)(null),ta=(0,s.useRef)(),tl=(0,s.useRef)(),tc=(0,s.useRef)(null),tu=(0,s.useRef)(!0),ts=(0,s.useRef)(null),tv=(0,s.useRef)(null),tb=(0,s.useRef)(null),tR=(0,s.useCallback)(function(e){e()},[]),tE=(0,X.L)(tR),ty=(0,X.L)(F),tN=(0,s.useCallback)(function(e){b&&![ts,tv,tb].some(function(t){return e.contains(t.current)})&&e6(!0)},[b,ts]),tC=(0,s.useCallback)(function(){var e;b&&document.activeElement!==(null===(e=tc.current)||void 0===e?void 0:e.querySelector("input"))&&e6(!1)},[b]);useOnClickInsideOutside(tc,tN,tC),useMaximizeListboxHeight(tc);var getIsLocalQuery=function(e){return e.length&&e[0].category===ep.currentLocation},tx=(0,s.useCallback)(function(){return"FOR_RENT"===ev},[ev]),tO=(0,s.useCallback)(function(e){if(ei)return e?ei.filter(function(e){return"BUILDER_COMMUNITIES"!==e}):ei;if(b&&!N){var t,n=["REGIONS","FORSALE","RENTALS","SOLD"];return tx()&&n.push("COMMUNITIES"),(e||!E||(null===(t=eW.displayName)||void 0===t?void 0:t.length)>=7)&&n.push("SEMANTIC_REGIONS"),!eE||e||tx()||n.push("BUILDER_COMMUNITIES"),n}},[null===(t=eW.displayName)||void 0===t?void 0:t.length,b,E,N,eE,tx,ei]),tI=(0,s.useMemo)(function(){return{abKey:i,clientId:S,centroid:a,regionAddressAutocompleteURL:en,recentSearchLocalStorageKey:et,fetchSavedHomes:el,fetchSavedSearches:ec,disableCurrentLocation:p,resultTypes:tO(!1),userSearchContext:ev}},[i,a,S,p,tO,et,en,el,ec,ev]),tA=(0,s.useCallback)(function(e,t){N&&eM(!0),x(e,eq,tI,t,void 0,b&&!N?eb:void 0,N).then(function(e){var t=T("suggestions"in e?e.suggestions:e,!1,b);eO(getIsLocalQuery(t)?"local":"remote"),eL(function(e){return 0===t.length?tf:suggestionsToString(t)!==suggestionsToString(e)?t:e}),"requestId"in e&&(tl.current=e.requestId)}).catch(I).finally(function(){N&&eM(!1)})},[b,N,x,I,T,eq,tI,eb]),tT=(0,m.Z)(tA,400);(0,s.useEffect)(function(){eQ(H),b&&eZ(!0)},[H,b]),(0,s.useEffect)(function(){b&&eZ(!0)},[ev,b]),(0,s.useEffect)(function(){eZ(!0)},[el,ec]),(0,s.useEffect)(function(){if(eD){var e,t=b&&(null===(e=eW.displayName)||void 0===e?void 0:e.length)>0?ef:e_;!b||e8?(tA(eW.displayName,t),eZ(!1)):eL(tf)}},[eD,e8,b,tA,eW.displayName]),(0,s.useEffect)(function(){var listener=function(){return null==eo?void 0:eo(tr)};return window.addEventListener("popstate",listener),function(){return window.removeEventListener("popstate",listener)}},[eo]),(0,s.useEffect)(function(){return e5(eT.length+" suggested results are available. Use up and down arrow keys to navigate"),clearTimeout(ti.current),ti.current=window.setTimeout(function(){e5(null)},500),function(){return clearTimeout(ti.current)}},[eT]);var tL=(0,s.useCallback)(function(e){var t={displayName:"Current Location",category:ep.currentLocation};ej(e.coords),eQ(t),eJ(!0),ty(t,{accuracy:e.coords.accuracy,latitude:e.coords.latitude,longitude:e.coords.longitude})},[ty]),tk=(0,s.useCallback)(function(){eJ(!1),alert("There is no location support on this device or it is disabled. Please check your settings.")},[]),tB=(0,s.useCallback)(function(e,t){void 0===e&&(e=tL),void 0===t&&(t=tk),n.g.navigator.geolocation?n.g.navigator.geolocation.getCurrentPosition(e,t):console.warn("No location object available")},[tk,tL]),tw=(0,s.useCallback)(function(e,t){tB(function(n){ej(n.coords),eJ(!0);var i,o=n.coords,r=o.latitude,a=o.longitude;ty(e,{latitude:r,longitude:a,mapBounds:(i=t/Math.cos(r*Math.PI/180),{north:r+t/2,south:r-t/2,west:a-i/2,east:a+i/2})})})},[tB,ty]),tM=(0,s.useCallback)(function(e,t){if(isRegionSuggestion(e)||isRecentRegionSuggestion(e)){var n=e.displayName,i=e.data;return c.RecentSearchClient.addToRecentSearches(e),ty({displayName:n,regions:[{regionId:i.regionId}],category:ep.region},eq)}if(isSemanticSuggestion(e)||isRecentSemanticSuggestion(e)){var o=e.displayName,r=e.data;c.RecentSearchClient.addToRecentSearches(e);var a={displayName:o,category:ep.semantic,regions:r.regions.map(function(e){return{regionId:e.id}}),filters:t,queryResolutionStatus:e.data.queryResolutionStatus,isSemanticSearchResult:!0,isSimpleFilterChange:isSimpleFilterChange(e.data.filters)};return r.nearMeSearch&&r.viewLatitudeDelta?tw(a,r.viewLatitudeDelta):ty(a)}return ty(e,eq)},[eq,tw,ty]),tF=(0,s.useCallback)(function(e,t){var n=eP[e.category],i=null==n?void 0:n.getSearchBoxClickLabel;"function"!=typeof i?console.error("No ga click event configured for search term with category "+e.category):fireTrackEvent({trackEventProp:{category:k.category,action:k.getClickActionName(e.category),label:i({chosenSuggestion:e,allSuggestions:eT,chosenIndex:t+1,searchBoxValue:eW.displayName})},autocompleteResult:e,clickstreamTriggerOverrides:f,clickstreamDecorators:g,allowEmptyInitialClickstreamBlocks:r})},[r,eT,g,f,eW.displayName,k]),tU=(0,s.useCallback)(function(){"function"==typeof eg?tE(function(){return eg()}):fireTrackEvent({trackEventProp:{category:"searchbox",action:"focus",label:"searchpage"},eventName:eR.searchBoxFocus,clickstreamTriggerOverrides:f,clickstreamDecorators:g,allowEmptyInitialClickstreamBlocks:r})},[r,g,f,eg,tE]),tD=(0,s.useCallback)(function(e){return isRecentSearch(e)?"RECENT":isSavedSearchSuggestion(e)?"SAVED_SEARCH":"local"===ex&&isSemanticSuggestion(e)?"SUGGESTED":"AUTOCOMPLETE"},[ex]),tP=(0,s.useCallback)(function(e,t){return new Promise(function(n,o){var l,u,s,d,m,_,S,h,p,v,R,E,y,C,x,O,I,A,T,L,k,B;if(tu.current=!1,u=eW.displayName,null==ea||ea(tr),tF(e,t),eQ(e),b&&(null===(l=e.displayName)||void 0===l?void 0:l.length)===0)return n();if(e.category===ep.currentLocation)return tB(),$If_1.call(this);if(!b||N)return N&&(isRegionSuggestion(e)||isRecentRegionSuggestion(e))&&c.RecentSearchClient.addToRecentSearches(e),B={interactionId:ta.current,selectionType:tD(e),selectionIndex:t,rawValue:u},fireEvent({eventName:eR.queryUnderstandingResponse,suggestion:Object.assign({},e,{metadata:B}),clickstreamTriggerOverrides:f,clickstreamDecorators:g,allowEmptyInitialClickstreamBlocks:r}),ty(e,eq),N&&q.current instanceof HTMLElement&&q.current.blur(),$If_2.call(this);if((s=-1!==t)&&!isRecentSemanticSuggestion(e))return _=(m=getUpdatedFilterData(null===(d=e.data)||void 0===d?void 0:d.filters)).filterState,S=m.filterBlock,h={interactionId:ta.current,requestId:tl.current,selectionType:tD(e),selectionIndex:t,rawValue:u,searchFilterBlock:S},fireEvent({eventName:eR.queryUnderstandingResponse,suggestion:Object.assign({},e,{metadata:h}),clickstreamTriggerOverrides:f,clickstreamDecorators:g,allowEmptyInitialClickstreamBlocks:r}),tM(e,_),q.current instanceof HTMLElement&&q.current.blur(),eZ(!0),$If_3.call(this);return R=isRecentSearch(e)?"RECENT":"MANUAL",Promise.resolve(fetchZgGraphSuggestions(E=e.displayName,{zgGraphClient:eb,graphqlQuery:e3,autocompleteConfig:{abKey:i,centroid:a,resultTypes:tO(!0),userSearchContext:ev,fetchLimit:1},extraVariables:{querySource:R}})).then((function(n){try{return y=n.suggestions,C=n.requestId,x=n.requestError,O=null!==(p=y[0])&&void 0!==p?p:{category:ep.semantic,displayName:null,data:{queryResolutionStatus:x?"ERROR":"FAILED"}},A=(I=getUpdatedFilterData(null===(v=O.data)||void 0===v?void 0:v.filters)).filterState,T=I.filterBlock,L={interactionId:ta.current,requestId:C,selectionType:R,selectionIndex:t,rawValue:u,searchFilterBlock:T},fireEvent({eventName:eR.queryUnderstandingResponse,suggestion:Object.assign({},O,{metadata:L}),clickstreamTriggerOverrides:f,clickstreamDecorators:g,allowEmptyInitialClickstreamBlocks:r}),O.displayName?((null===(k=O.data)||void 0===k?void 0:k.queryResolutionStatus)==="PARTIAL_RESOLUTION"&&(O.displayName=E),tM(O,A)):ty({displayName:e.displayName,regions:[],filters:{},queryResolutionStatus:x?"ERROR":"FAILED",category:ep.semantic,isSimpleFilterChange:!0}),q.current instanceof HTMLElement&&q.current.blur(),s&&eZ(!0),$If_3.call(this)}catch(e){return o(e)}}).bind(this),o);function $If_3(){return $If_2.call(this)}function $If_2(){return $If_1.call(this)}function $If_1(){return n()}})},[i,r,a,g,f,eW.displayName,b,N,tF,tO,q,eq,tB,ea,tM,ev,ty,eb,tD]);(0,s.useEffect)(function(){!ew&&tt&&N&&(eT.length>0&&!getIsLocalQuery(eT)?tP(eT[0],0):tP(eW,-1),tn(!1))},[ew,tt,eT,tP,eW,N]);var tZ=(0,s.useCallback)(function(){tE(function(){e6(!0),null==er||er()}),tU(),tu.current=!0,b&&(i&&(ta.current=i+"-"+new Date().toISOString()),setTimeout(function(){if(q.current instanceof HTMLInputElement){var e=q.current.value.length;q.current.setSelectionRange(e,e)}}))},[i,b,tU,q,er,tE]),tH=(0,s.useCallback)(function(e,t){var n=t.reason;"string"!=typeof e||(n!==ef||e.match(to))&&n!==eS||(w(),eQ({displayName:e,category:"RAW_SEARCH"}),eJ(!1),tT(e,n))},[tT,w]),tG=(0,s.useCallback)(function(){return K in ee?ee[K]:{}},[K,ee]),tq=(0,s.useCallback)(function(){tH("",{reason:eS}),tE(function(){return z()})},[z,tH,tE]),tj=(0,s.useMemo)(function(){return{buttonPadding:"xl"===ed?{sm:D.n.sm,md:4.375,lg:4.375}:{},inputPadding:"xl"===ed?{paddingY:{sm:D.n.sm,md:D.n.md,lg:D.n.md}}:{},size:"xl"===ed?"lg":ed}},[ed]),t$=tG(),tV=t$.supportsLocationIcon,tz=t$.placeholderText,tW=tj.buttonPadding,tQ=tj.inputPadding,tY=tj.size,tK=useSearchBoxInput({supportsLocationIcon:void 0!==tV&&tV,disableCurrentLocation:p,showLocationIcon:eX,isCurrentLocationSearch:void 0!==j&&j,size:tY,buttonPadding:tW,inputPadding:tQ,clearInput:tq,isUserPositionInMapBounds:void 0===$||$,currentSearchTerm:eW,enableNaturalLanguageSearch:b,onLocationAccessGranted:tL,onLocationAccessFailed:tk,onReCenter:Q,inputRef:q,clearButtonRef:ts,submitButtonRef:tv,currentLocationButtonRef:tb,onBlur:(0,s.useCallback)(function(e,t){tu.current&&fireEvent({eventName:eR.dismissSearch,clickstreamTriggerOverrides:f,clickstreamDecorators:g,allowEmptyInitialClickstreamBlocks:r}),"function"==typeof t&&t(e),e6(!1)},[r,g,f]),showAdornments:void 0===eu||eu,renderInput:ey}),tX=useSearchBoxOption({autocompleteSource:ex,currentSearchTerm:eW}),tJ=(0,s.useCallback)(function(e){var t=e.index,n=eT[t];n&&tP(n,t)},[eT,tP]),t0=(0,s.useCallback)(function(e){e.preventDefault(),eW.category===ep.rawSearch&&(N?tT.isPending()?(tT.flush(),tn(!0)):eT.length&&!getIsLocalQuery(eT)?tP(eT[0],0):tP(eW,-1):tP(eW,-1))},[eT,eW,tT,N,tP]),t1=(0,s.useMemo)(function(){var e;return 0===eT.length?tf:"local"===ex?convertLocalSuggestionsToOptions(eT,b):(void 0===(e=b)&&(e=!1),eT.map(function(t,n){var i=t.displayName,o=t.category,r={index:n,label:i,value:createUniqueOptionValue$1(null!=i?i:"",o)};return e&&(r.icon=getSuggestionCategoryIcon$1(o,e)),r}))},[ex,eT,b]);return s.createElement(t_,{ref:tc,className:l,onSubmit:t0,__self:td,__source:{fileName:tm,lineNumber:1377,columnNumber:9}},s.createElement(tg,{allowSubmitWhileOpen:!0,fluidDropdown:!0,freeForm:!0,appearance:"input",autoCompleteBehavior:"manual",enableNaturalLanguageSearch:b,optionFilter:null,renderEmptyState:null,focusFirstOption:!1,size:tY,selectCallbackFrequency:"always",ref:tr,renderInput:tK,onChange:tH,onFocus:tZ,placeholder:tz,value:getSuggestionValue(eW),renderOption:tX,onOptionSelect:tJ,options:e8?t1:tf,__self:td,__source:{fileName:tm,lineNumber:1378,columnNumber:13}}),e2&&s.createElement(P.T,{"aria-live":"polite","aria-atomic":"true",__self:td,__source:{fileName:tm,lineNumber:1408,columnNumber:17}},s.createElement("p",{__self:td,__source:{fileName:tm,lineNumber:1409,columnNumber:21}},e2)))},tv=void 0,tb="/builds/zillow/searchxp/static-search-box/src/SearchBoxCombobox.tsx",tR=((a={}).region="REGION",a.multiRegion="MULTI_REGION",a),isMultiRegionSelection=function(e){return!!(e&&e.category===tR.multiRegion)},tE=eh.CLAIMED_HOME,ty=eh.CURRENT_LOCATION,tN=eh.RECENT_SEARCH,tC=eh.SAVED_HOME,tx=eh.SAVED_SEARCH,tO=/^\[[A-Z_]+\]/g,tI=(0,d.default)(y.u).withConfig({displayName:"SearchBoxCombobox__StyledSearchBoxAdornment",componentId:"sxp-sb__sc-1qvxrzk-0"})(["position:absolute;top:calc(50% - ","px);right:0;padding:0;width:","px;height:","px;justify-content:center;",";button{width:","px;height:","px;&:after{margin-top:-","px;min-width:","px;height:","px;}}"],21,42,42,function(e){return e.shouldHideAdornment&&"display: none;"},42,42,21,42,42),tA=(0,d.default)(T.l).withConfig({displayName:"SearchBoxCombobox__StyledForm",componentId:"sxp-sb__sc-1qvxrzk-1"})(["position:absolute;z-index:2;top:0;left:0;right:0;border:1px solid;border-radius:4px;border-color:",";background-color:",";&:active,&:hover,&:focus{border-color:",";}"],(0,N.Z)("colors.gray300"),(0,N.Z)("colors.backgroundWhite"),(0,N.Z)("colors.blue400")),tT=(0,d.default)(A.h).withConfig({displayName:"SearchBoxCombobox__StyledCombobox",componentId:"sxp-sb__sc-1qvxrzk-2"})(["background-color:",";border:none;border-radius:4px;&:focus,&:focus-within{box-shadow:0 0 0px 1px #fff,0 0 2px 3px #a6e5ff,0 0 2px 4px #006aff;}label{border:none;background-color:",";&:focus{box-shadow:none;}}@media screen and (max-width:889px){&&& [role='listbox'],&&& [role='dialog']{width:100vw !important;}}&&& [role='listbox'],&&& [role='dialog']{height:auto;max-height:100vh;z-index:100;}"],(0,N.Z)("colors.backgroundWhite"),(0,N.Z)("colors.backgroundWhite")),tL=(0,d.default)(Z.g).withConfig({displayName:"SearchBoxCombobox__StyledComboboxInput",componentId:"sxp-sb__sc-1qvxrzk-3"})(["border:none;padding-left:8px;width:100%;box-shadow:none;background-color:",";&:focus,&:focus-within{box-shadow:none;}span[class*='StyledTag']{position:relative;display:block;flex:0 auto;min-width:60px;padding-right:32px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;> button{position:absolute;top:calc(50% - 8px);right:8px;height:100%;}&:last-of-type{margin-right:8px;}}input[role='combobox']{background-color:",";text-overflow:ellipsis;",";&:focus{box-shadow:none;}}",""],(0,N.Z)("colors.backgroundWhite"),(0,N.Z)("colors.backgroundWhite"),function(e){return e.isRegionSelectionAtLimit&&"display: none;"},function(e){return e.isContainerFocused?'\n                // Forces input onto new line and full width\n                input[role="combobox"] {\n                    flex-basis: 100%;\n                }\n            ':(0,d.css)(["flex-wrap:nowrap;padding-right:","px;> button[class*='StyleTagCloseButton']{display:none;}&&& span[class*='StyledTag']:nth-child(1):nth-last-child(4){flex-shrink:0;padding-right:8px;> button{display:none;}}@media screen and (max-width:","px){span[class*='StyledTag']:nth-child(2) + input[role='combobox']{display:none;}}"],42,428)}),tk=d.default.span.withConfig({displayName:"SearchBoxCombobox__StyledListboxOptionLabelText",componentId:"sxp-sb__sc-1qvxrzk-4"})(["overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"]),tB=(0,d.default)(g.O).withConfig({displayName:"SearchBoxCombobox__StyledListboxOptionLabel",componentId:"sxp-sb__sc-1qvxrzk-5"})(["display:flex;"]),tw=(0,d.default)(_.n).withConfig({displayName:"SearchBoxCombobox__StyledListboxOptionLabelGleam",componentId:"sxp-sb__sc-1qvxrzk-6"})(["align-self:center;margin-left:auto;"]),getSuggestionCategoryIcon=function(e){switch(e){case ty:return s.createElement(b.Z,{__self:tv,__source:{fileName:tb,lineNumber:491,columnNumber:20}});case tN:return s.createElement(B.Z,{__self:tv,__source:{fileName:tb,lineNumber:493,columnNumber:20}});case tx:return s.createElement(M.Z,{"data-test":"saved-search-icon",__self:tv,__source:{fileName:tb,lineNumber:495,columnNumber:20}});case tC:case tE:return s.createElement(F.Z,{__self:tv,__source:{fileName:tb,lineNumber:498,columnNumber:20}});default:return null}},isLocalQuery=function(e){return!!(e.length&&e[0].category===ty)},isRegionInMultiRegionSelection=function(e,t){var n=t.regionId;return!!e.regions.find(function(e){return e.regionId===n})},isMultiRegionSelectionAtLimit=function(e){return e.regions.length>=5},isPointRegionSelection=function(e){return!!e.regions.find(function(e){return!0===e.isPointRegion})},isSelectionEmpty=function(e){return null===e||(isMultiRegionSelection(e)?isPointRegionSelection(e)||0===e.regions.length:!e.displayName)},shouldTriggerQU=function(e){return isSelectionEmpty(e)||!!(e&&e.category===ep.rawSearch)},SearchBox=function(e){var t=e.autocompleteConfig,n=e.className,i=e.fetchResultsError,o=void 0===i?function(e){return console.log(e)}:i,r=e.gaEventsConfig,a=void 0===r?{category:"searchbox",getClickActionName:function(e){return e===ep.rawSearch?"submit":"select-suggestion"},getFocusActionName:function(){return"focus"},getAddRegionName:function(){return"add-region"},getRemoveRegionName:function(){return"remove-region"},getRemoveAllRegionsName:function(){return"remove-all-regions"},getRemoveAllRegionsExternalLocation:function(){return"map-clear"}}:r,l=e.handleSubmit,d=e.initialSelection,g=e.isCurrentLocationSearch,_=e.isUserPositionInMapBounds,h=e.onReCenter,v=e.showAdornments,y=e.supportsLocationIcon,N=e.trackSearchBoxInputFocus,C=e.searchBoxDidFocusInput,I=e.searchBoxDidClickTag,A=e.searchBoxDidSubmitForm,T=e.searchBoxDidSelectOption,L=e.searchBoxDidClearAllSelections,k=e.searchBoxOnPopState,B=e.shouldClearSelection,w=e.allowEmptyInitialClickstreamBlocks,M=e.clickstreamTriggerOverrides,F=e.clickstreamDecorators,U=(0,s.useState)("local"),D=(0,u.Z)(U,2),Z=D[0],j=D[1],V=(0,s.useState)([]),z=(0,u.Z)(V,2),W=z[0],Q=z[1],J=(0,s.useState)(!1),ee=(0,u.Z)(J,2),et=ee[0],en=ee[1],ei=(0,s.useState)(!1),eo=(0,u.Z)(ei,2),er=eo[0],ea=eo[1],el=(0,s.useState)({}),ec=(0,u.Z)(el,2),ed=ec[0],em=ec[1],e_=(0,s.useState)(null),ef=(0,u.Z)(e_,2),eS=ef[0],eh=ef[1],ev=(0,s.useState)(!0),eb=(0,u.Z)(ev,2),eE=eb[0],ey=eb[1],eN=(0,s.useState)(!1),eC=(0,u.Z)(eN,2),ex=eC[0],eO=eC[1],eI=(0,s.useState)(!1),eA=(0,u.Z)(eI,2),eT=eA[0],eL=eA[1],ek=(0,s.useState)(null!=d?d:null),eB=(0,u.Z)(ek,2),ew=eB[0],eM=eB[1],eF=(0,s.useState)(!1),eU=(0,u.Z)(eF,2),eD=eU[0],eZ=eU[1],eH=(0,s.useState)(!1),eG=(0,u.Z)(eH,2),eq=eG[0],ej=eG[1],e$=(0,s.useState)(!1),eV=(0,u.Z)(e$,2),ez=eV[0],eW=eV[1],eQ=(0,X.L)(function(e){e()});(0,eg.F_)(function(){eM(null!=d?d:null)},[d]);var eY=(0,s.useCallback)(function(){return isSelectionEmpty(ew)?"City, Neighborhood, ZIP, Address":ex?"City, Neighborhood, ZIP":"Add another location"},[ew,ex]),eK=(0,s.useState)(eY()),eX=(0,u.Z)(eK,2),eJ=eX[0],e0=eX[1];(0,s.useEffect)(function(){e0(eY)},[eY]);var e1=(0,s.useRef)(null),e2=(0,s.useRef)(null),e3=(0,s.useRef)(),e5=(0,s.useRef)(null),e7=(0,s.useCallback)(function(){var e,t=null===(e=e2.current)||void 0===e?void 0:e.querySelector("input");return t?t.value:""},[e2]),clearAutocompleteResults=function(){eL(!1),ea(!1),Q([])},e4=(0,s.useCallback)(function(e,n){return new Promise(function(i,r){var a,l=(function(e){return(function(t){try{return en(!1),e&&e.call(this,t)}catch(e){return r(e)}}).bind(this)}).bind(this),$Try_1_Post=function(){try{return i()}catch(e){return r(e)}},$Try_1_Catch=function(e){try{return o(e instanceof Error?e.message:"string"==typeof e?e:"Unknown error occured fetching AutoComplete results."),eL(!1),ea(!0),l($Try_1_Post)()}catch(e){return l(r)(e)}};try{return en(!0),Promise.resolve(defaultFetchSuggestions(e,ed,t,n,1)).then(function(e){try{return j(isLocalQuery(e)?"local":"remote"),a=defaultFilterSuggestions(e,!0),Q(a),shouldTriggerQU(ew)||a.length?ea(!1):ea(!0),l($Try_1_Post)()}catch(e){return $Try_1_Catch(e)}},$Try_1_Catch)}catch(e){$Try_1_Catch(e)}})},[t,o,ed,ew]),e8=(0,m.Z)(e4,400);(0,s.useEffect)(function(){if(W.length){var e;eh(W.length+" suggested results are available. Use up and down arrow keys to navigate"),clearTimeout(e3.current),(null===(e=window)||void 0===e?void 0:e.setTimeout)&&(e3.current=window.setTimeout(function(){eh(null)},500))}return function(){clearTimeout(e3.current)}},[W]),(0,s.useEffect)(function(){var listener=function(){return null==k?void 0:k(e2)};return window.addEventListener("popstate",listener),function(){return window.removeEventListener("popstate",listener)}},[k]);var trackRegionEvent=function(e,t,n){var i=t.regionId,o={category:a.category,action:"add"===e?a.getAddRegionName():a.getRemoveRegionName(),label:i+" | "+n};"remove"===e?fireTrackEvent({trackEventProp:o,regionIndex:n,isMultiregionSearch:!0,eventName:eR.removeMultiRegion}):eQ(function(){return(0,Y.track)(o)})},trackSearchBoxSubmit=function(e,t){var n,i=eP[e.category].getSearchBoxClickLabel,o=isRegionSuggestion(e)||isRecentRegionSuggestion(e);if("function"!=typeof i)console.error("No GA click event configured for search term with category "+e.category);else{var r={category:a.category,action:a.getClickActionName(e.category),label:i({chosenSuggestion:e,allSuggestions:W,chosenIndex:t,searchBoxValue:e7()})};if(o){n={category:tR.region,displayName:e.displayName,regionId:e.data.regionId,regionType:e.data.regionType};var l=!!isMultiRegionSelection(ew)&&isPointRegionSelection(ew);fireTrackEvent({trackEventProp:r,autocompleteResult:e,isMultiregionSearch:!0,isRegionInMultiRegionSelection:isMultiRegionSelection(ew)&&(isMultiRegionSelectionAtLimit(ew)||isRegionInMultiRegionSelection(ew,n)),isPointRegionSelected:l})}else fireTrackEvent({trackEventProp:r,autocompleteResult:e,isMultiregionSearch:!0})}},e6=(0,X.L)(function(e,t){l(e,t)},[l]),e9=(0,s.useCallback)(function(e,t){void 0===t&&(t=ed),eM(e),e6(e,t)},[eM,e6,ed]),selectAutocompleteResult=function(e){if(!(isRegionSuggestion(e)||isRecentRegionSuggestion(e))){e9(e);return}var t={category:tR.region,displayName:e.displayName,regionId:e.data.regionId,regionType:e.data.regionType};if(!(isMultiRegionSelection(ew)&&(isMultiRegionSelectionAtLimit(ew)||isRegionInMultiRegionSelection(ew,t)))){var n={category:tR.multiRegion,regions:isMultiRegionSelection(ew)&&!isPointRegionSelection(ew)?[].concat((0,$.Z)(ew.regions),[t]):[t]};isMultiRegionSelection(ew)&&ew.regions.length>0&&fireEvent({eventName:eR.addNthRegion}),trackRegionEvent("add",t,n.regions.length),e9(n),isRegionSuggestion(e)&&c.RecentSearchClient.addToRecentSearches(e)}},clearSelection=function(e){void 0===e&&(e=!0);var t={category:tR.multiRegion,regions:[]};e&&e6(t,ed),eM(null),clearAutocompleteResults()};(0,s.useEffect)(function(){isMultiRegionSelection(ew)&&ew.regions.length&&B&&(clearSelection(!1),eQ(function(){(0,Y.track)({category:a.category,action:a.getRemoveAllRegionsName(),label:ew.regions.length+" | "+a.getRemoveAllRegionsExternalLocation()})}))},[B]);var te=(0,s.useCallback)(function(e){var t=e.coords,n={category:ep.currentLocation,displayName:"Current Location"};em(t),ey(!0),e9(n,t)},[e9]),tt=(0,s.useCallback)(function(){ey(!1),alert("There is no location support on this device or it is disabled. Please check your settings.")},[]),tn=(0,s.useCallback)(function(){var e,t;(null===(e=navigator)||void 0===e?void 0:null===(t=e.geolocation)||void 0===t?void 0:t.getCurrentPosition)?navigator.geolocation.getCurrentPosition(te,tt):console.warn("No location object available")},[te,tt]),ti=(0,s.useCallback)(function(){g&&"function"==typeof h?h():tn()},[g,h,tn]),onComboboxClear=function(){if(clearSelection(),null==L||L(e2),isMultiRegionSelection(ew)&&ew.regions.length){var e={category:a.category,action:a.getRemoveAllRegionsName(),label:ew.regions.length+" | searchbox-clear"};ej(!0),fireTrackEvent({trackEventProp:e,isMultiregionSearch:!0,eventName:eR.removeAllMultiRegion})}};(0,s.useEffect)(function(){var clickListener=function(e){var t,n=e.target,i=null===(t=e1.current)||void 0===t?void 0:t.contains(n);i&&!ex&&eO(!0),!i&&ex&&(eW(function(e){if(e){var t,n;null===(t=e2.current)||void 0===t||null===(n=t.querySelector("input"))||void 0===n||n.focus()}return!1}),eO(!1),eZ(!1),ej(!1),clearAutocompleteResults())};return document.addEventListener("click",clickListener),function(){document.removeEventListener("click",clickListener)}},[e1,e2,ex]);var removeContainerFocus=function(){eO(!1),document.activeElement instanceof HTMLElement&&document.activeElement.blur()},onComboboxInputFocus=function(){e8(e7(),"input-focused"),e5.current=t.abKey+"-"+new Date().toISOString(),eQ(function(){eO(!0),null==C||C(e2)}),eQ(function(){"function"==typeof N&&N()})};(0,s.useEffect)(function(){eD&&!eq&&(fireEvent({eventName:eR.dismissSearch}),eZ(!1),ej(!1))},[eD,eq]);var onComboboxInputBlur=function(){eO(function(e){return e&&eZ(!0),!1})},fireQueryUnderstandingResponseEvent=function(e,t){var n={interactionId:e5.current,selectionType:isRecentSearch(e)?"RECENT":isSavedSearchSuggestion(e)?"SAVED_SEARCH":"local"===Z&&isSemanticSuggestion(e)?"SUGGESTED":"AUTOCOMPLETE",selectionIndex:t,rawValue:e7()};fireEvent({eventName:eR.queryUnderstandingResponse,suggestion:Object.assign({},e,{metadata:n}),clickstreamTriggerOverrides:M,clickstreamDecorators:F,allowEmptyInitialClickstreamBlocks:w})},onOptionSelect=function(e){var t=e.index;if(W.length&&"number"==typeof t){e8.isPending()&&e8.cancel(),null==T||T(e2);var n=W[t];(trackSearchBoxSubmit(n,t+1),n.category!==ty||ed.latitude&&ed.longitude)?(selectAutocompleteResult(n),fireQueryUnderstandingResponseEvent(n,t)):tn(),clearAutocompleteResults(),removeContainerFocus()}},selectText=function(e){if(e){var t={category:ep.rawSearch,displayName:e};trackSearchBoxSubmit(t,-1),e9(t)}};(0,s.useEffect)(function(){et||!eT||isLocalQuery(W)||(W.length?onOptionSelect({index:0}):shouldTriggerQU(ew)&&selectText(e7()),eL(!1))},[et,eT,W,ew]);var onOptionRemove=function(e){if(isMultiRegionSelection(ew)){var t=ew.regions.filter(function(t){return t.displayName!==e}),n=ew.regions.reduce(function(t,n,i){return n.displayName===e?[n,i+1]:t},[void 0,-1]),i=(0,u.Z)(n,2),o=i[0],r=i[1],a=Object.assign({},ew,{regions:t});o&&(ej(!0),4!==t.length||ez||eW(!0),trackRegionEvent("remove",o,r)),0===t.length?clearSelection():e9(a)}},to=(0,s.useCallback)(function(e){"tag"!==e.target.dataset.componentName?e.stopPropagation():null==I||I(e2)},[e2,I]),renderTag=function(e){return s.createElement(H.V,(0,eu.Z)({},e,{onClick:to,"data-component-name":"tag",textTransform:"none",__self:tv,__source:{fileName:tb,lineNumber:1264,columnNumber:9}}))},tr=(0,s.useCallback)(function(){var e;return e=eE&&(y||g)?s.createElement(R.h,{title:"Use your location",onClick:ti,icon:g&&!_?s.createElement(p.Z,{__self:tv,__source:{fileName:tb,lineNumber:1335,columnNumber:29}}):s.createElement(b.Z,{__self:tv,__source:{fileName:tb,lineNumber:1337,columnNumber:29}}),size:E.G.sm,type:"button",bare:!0,__self:tv,__source:{fileName:tb,lineNumber:1330,columnNumber:17}}):s.createElement(x.Z,{__self:tv,__source:{fileName:tb,lineNumber:1346,columnNumber:25}}),s.createElement(tI,{shouldHideAdornment:ex,__self:tv},e)},[ex,g,_,ti,eE,y]),ta=(0,s.useCallback)(function(){return er?s.createElement(G.N,{__self:tv,__source:{fileName:tb,lineNumber:1410,columnNumber:17}},"We couldn't find a location match."):null},[er]),tl=(0,s.useCallback)(function(){if(ew){var e;if(isMultiRegionSelection(ew)){if(ew.regions.find(function(e){return e.isPointRegion}))return[];var t=ew.regions.map(function(e){return e.displayName});if(ex||t.length<2)return t;var n=t.slice(-1)[0];return[t.length-1+" more",n]}return null!==(e=ew.displayName)&&void 0!==e?e:[]}return[]},[ew,ex]);return s.createElement(tA,{ref:e1,onSubmit:function(e){e.preventDefault(),null==A||A(e2),e7().length&&(e8.isPending()?(e8.flush(),eL(!0)):shouldTriggerQU(ew)&&selectText(e7()))},className:n,__self:tv,__source:{fileName:tb,lineNumber:1441,columnNumber:9}},s.createElement(tT,{allowSubmitWhileOpen:!0,ref:e2,focusFirstOption:"remote"===Z,appearance:"input",autoCompleteBehavior:"manual",optionFilter:null,renderEmptyState:ta,size:"md",selectCallbackFrequency:"always",renderInput:function(e){var t=e.value,n=e.onBlur,i=Object.assign({},(0,es.Z)(e,["value","onBlur"]),{autoComplete:"off",value:t?t.replace(tO,""):t,onBlur:function(e){"function"==typeof n&&n(e),onComboboxInputBlur()}}),o=s.createElement(tL,(0,eu.Z)({},i,{onFocus:onComboboxInputFocus,onClear:onComboboxClear,onTagClose:onOptionRemove,renderTag:renderTag,isContainerFocused:ex,isRegionSelectionAtLimit:isMultiRegionSelection(ew)&&isMultiRegionSelectionAtLimit(ew),__self:tv}));return v?s.createElement(O._,{input:o,rightAdornment:tr(),__self:tv,__source:{fileName:tb,lineNumber:1401,columnNumber:20}}):o},renderOption:function(e){var t,n,i,o=e.label,r=e.notificationCount;e.appearance;var a=e.onOptionClick,l=(0,es.Z)(e,["label","notificationCount","appearance","onOptionClick"]),c=(t=e7(),"remote"===Z&&t.trim()?t:null),u=r?s.createElement(tw,{count:r,maxSuffix:!0,__self:tv,__source:{fileName:tb,lineNumber:1289,columnNumber:13}}):null;return"string"==typeof o&&(i=s.createElement(tB,{__self:tv,__source:{fileName:tb,lineNumber:1296,columnNumber:17}},s.createElement(tk,{__self:tv,__source:{fileName:tb,lineNumber:1297,columnNumber:21}},s.createElement(f.o,{text:o,pattern:c,__self:tv,__source:{fileName:tb,lineNumber:1298,columnNumber:25}})),u)),s.createElement(S.O,(0,eu.Z)({},l,{onOptionClick:a?(0,K.R)(a):a,label:null!==(n=i)&&void 0!==n?n:o,__self:tv,__source:{fileName:tb,lineNumber:1306,columnNumber:13}}))},onOptionSelect:onOptionSelect,options:W.length?W[0].category===ty?W.map(function(e,t){var n=e.displayName,i=void 0===n?"":n,o=e.category,r=e.notificationCount;return{index:t,label:i,value:"["+o+"]"+i,icon:getSuggestionCategoryIcon(o),notificationCount:r}}):W.map(function(e,t){var n=e.displayName,i=void 0===n?"":n;return{index:t,label:i,value:i}}):[],onChange:function(e,t){"clear input"===t.reason&&clearSelection(!1)},onKeyUp:function(e){var t=e.currentTarget;["Enter","ArrowDown","ArrowUp","ArrowLeft","ArrowRight"].includes(e.key)||e8(t.value,"freeform")},placeholder:eJ,value:tl(),__self:tv,__source:{fileName:tb,lineNumber:1442,columnNumber:13}}),isMultiRegionSelection(ew)&&isMultiRegionSelectionAtLimit(ew)&&ex&&s.createElement(q.n,{margin:"xs",__self:tv,__source:{fileName:tb,lineNumber:1467,columnNumber:21}},"You can only search up to ",s.createElement("strong",{__self:tv,__source:{fileName:tb,lineNumber:1468,columnNumber:51}},"five locations")," at once."),eS&&s.createElement(P.T,{"aria-live":"polite","aria-atomic":"true",__self:tv,__source:{fileName:tb,lineNumber:1472,columnNumber:17}},s.createElement("p",{__self:tv,__source:{fileName:tb,lineNumber:1473,columnNumber:21}},eS)))};SearchBox.defaultProps={isCurrentLocationSearch:!1,isUserPositionInMapBounds:!1,onReCenter:function(){},showAdornments:!0,supportsLocationIcon:!1,trackSearchBoxInputFocus:function(){},clickstreamTriggerOverrides:null,clickstreamDecorators:null,allowEmptyInitialClickstreamBlocks:!1};var tM=SearchBox,tF="/builds/zillow/searchxp/static-search-box/src/SearchBoxModal.tsx",tU=void 0;function _templateObject(){var e=(0,en.Z)(["\n    html,\n    body {\n        overflow: hidden !important;\n    }\n"]);return _templateObject=function(){return e},e}var tD=(0,d.createGlobalStyle)(_templateObject()),tP=d.default.div.withConfig({displayName:"SearchBoxModal__SearchBoxDialog",componentId:"sxp-sb__xw1c73-0"})(["&.fullscreen{position:fixed;top:0px;left:0px;z-index:",";height:100%;width:100%;box-sizing:border-box;display:flex;justify-content:center;align-items:center;padding:0px;-webkit-overflow-scrolling:touch;}"],(0,N.Z)("zIndices.modal")),tZ=d.default.section.withConfig({displayName:"SearchBoxModal__SearchBoxDialogSection",componentId:"sxp-sb__xw1c73-1"})([".fullscreen &{z-index:2;max-width:100%;border-radius:0px;min-height:100%;max-height:100%;box-sizing:border-box;background-color:",";outline:none;position:relative;display:flex;flex-direction:column;height:auto;width:100%;form{margin-left:","px;margin-right:","px;}}"],(0,N.Z)("colors.backgroundWhite"),(0,N.Z)("spacing.xl"),(0,N.Z)("spacing.md")),tH=d.default.div.withConfig({displayName:"SearchBoxModal__SearchBoxDialogBody",componentId:"sxp-sb__xw1c73-2"})([".fullscreen &{overflow-y:auto;padding:12px ","px 0px;flex:1 1 auto;margin-top:0px;section{box-shadow:none;border-top:1px solid ",";border-color:none;margin-top:","px !important;border-radius:0;ul{border:none;}}}form{position:relative;z-index:2;}"],(0,N.Z)("spacing.sm"),(0,N.Z)("colors.borderDark"),(0,N.Z)("spacing.xs")),tG=d.default.div.withConfig({displayName:"SearchBoxModal__SearchBoxDialogClose",componentId:"sxp-sb__xw1c73-3"})([".fullscreen &{position:absolute;z-index:",";top:","px;left:0px;}"],(0,N.Z)("zIndices.dialog"),(0,N.Z)("spacing.xs")),tq=(0,d.default)(SearchBox$2).withConfig({displayName:"SearchBoxModal__StyledSearchBox",componentId:"sxp-sb__xw1c73-4"})([".fullscreen &{position:absolute;left:0px;right:0px;}.fullscreen &&& [role='dialog']{height:100vh !important;}"]),tj=(0,d.default)(tM).withConfig({displayName:"SearchBoxModal__StyledSearchComboBox",componentId:"sxp-sb__xw1c73-5"})([".fullscreen &{top:","px;}"],(0,N.Z)("spacing.xs")),t$=(0,d.default)(R.h).withConfig({displayName:"SearchBoxModal__StyledIconButton",componentId:"sxp-sb__xw1c73-6"})(["display:flex;"]),tV=s.createElement(j.Z,{__self:void 0,__source:{fileName:tF,lineNumber:135,columnNumber:19}}),SearchBoxModal=function(e){var t=e.children,n=e.fullScreen,i=e.onClose;return s.createElement(tP,{className:n?"fullscreen":"","aria-label":"Search box modal",__self:tU,__source:{fileName:tF,lineNumber:138,columnNumber:5}},s.createElement(tZ,{__self:tU,__source:{fileName:tF,lineNumber:139,columnNumber:9}},s.createElement(tH,{__self:tU,__source:{fileName:tF,lineNumber:140,columnNumber:13}},t),n&&s.createElement(tG,{__self:tU,__source:{fileName:tF,lineNumber:142,columnNumber:17}},s.createElement(t$,{"aria-label":"Close modal",title:"Close modal",icon:tV,onClick:i,size:E.G.md,buttonType:"secondary",type:"button",bare:!0,__self:tU,__source:{fileName:tF,lineNumber:143,columnNumber:21}}))),n&&s.createElement(tD,{__self:tU,__source:{fileName:tF,lineNumber:156,columnNumber:24}}))},SearchBoxModalContainer$1=function(e){var t=(0,s.useState)(!1),n=(0,u.Z)(t,2),i=n[0],o=n[1],r=e.modalDidUpdate,a=(0,s.useRef)();(0,s.useEffect)(function(){return clearTimeout(a.current)},[]);var l=(0,s.useCallback)(function(){o(!0),null==r||r(!0)},[r]),c=(0,s.useCallback)(function(e){var t,n;o(!1),null==r||r(!1),null===(t=e.current)||void 0===t||null===(n=t.querySelector("input"))||void 0===n||n.blur()},[r]),d=(0,s.useCallback)(function(e){o(!0),null==r||r(!0),a.current=window.setTimeout(function(){var t,n;return null===(t=e.current)||void 0===t?void 0:null===(n=t.querySelector("input"))||void 0===n?void 0:n.focus()})},[r]),m=(0,s.useCallback)(function(){o(!1),null==r||r(!1)},[r]),g=(0,X.L)(m);(0,s.useEffect)(function(){return m},[m]);var _=Object.assign({},e,{searchBoxDidFocusInput:l,searchBoxDidClickTag:d,searchBoxDidSelectOption:c,searchBoxOnPopState:c}),f=Object.assign({},e,{searchBoxDidFocusInput:l,searchBoxDidSelectOption:c,searchBoxOnPopState:c});return s.createElement(SearchBoxModal,{fullScreen:i,onClose:g,__self:tU,__source:{fileName:tF,lineNumber:232,columnNumber:9}},e.enableNaturalLanguageSearch?s.createElement(tq,(0,eu.Z)({},f,{__self:tU,__source:{fileName:tF,lineNumber:234,columnNumber:17}})):s.createElement(tj,(0,eu.Z)({},_,{__self:tU,__source:{fileName:tF,lineNumber:236,columnNumber:17}})))}}}]);